!function(){"use strict";angular.module("app.components",[])}(),function(){"use strict";angular.module("app.components").factory("User",["COUNTRY_CODES",function(t){function e(e){this.id=e.id,this.username=e.username,this.avatar=e.avatar,this.kits=e.devices,this.url=e.url,this.city=e.location.city,this.country=t[e.location.country_code]}return e}])}(),function(){"use strict";angular.module("app.components").factory("NonAuthUser",["User",function(t){function e(e){t.call(this,e)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e}])}(),function(){"use strict";angular.module("app.components").factory("AuthUser",["User",function(t){function e(e){t.call(this,e),this.email=e.email,this.role=e.role,this.key=e.legacy_api_key}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e}])}(),function(){"use strict";angular.module("app.components").factory("Sensor",["sensorUtils",function(t){function e(e,a){this.name=t.getSensorName(e),this.id=e.id,this.unit=t.getSensorUnit(this.name),this.value=t.getSensorValue(e),this.prevValue=t.getSensorPrevValue(e),this.icon=t.getSensorIcon(this.name),this.arrow=t.getSensorArrow(this.value,this.prevValue),this.color=t.getSensorColor(this.name);var o=t.getSensorDescription(this.id,a);this.fullDescription=o,this.previewDescription=o.length>140?o.slice(0,140).concat(" ... "):o}return e}])}(),function(){"use strict";angular.module("app.components").factory("SearchResultLocation",["SearchResult",function(t){function e(e){t.call(this,e),this.lat=e.latitude,this.lng=e.longitude,this.layer=e.layer}return e}])}(),function(){"use strict";angular.module("app.components").factory("SearchResult",["searchUtils",function(t){function e(e){this.type=e.type,this.id=e.id,this.name=t.parseName(e),this.location=t.parseLocation(e),this.icon=t.parseIcon(e,this.type),this.iconType=t.parseIconType(this.type)}return e}])}(),function(){"use strict";angular.module("app.components").factory("Marker",["device","markerUtils",function(t,e){function a(t){this.lat=e.parseCoordinates(t).lat,this.lng=e.parseCoordinates(t).lng,this.message='<div class="popup"><div class="popup_top '+e.classify(e.parseType(t))+'"><p class="popup_name">'+e.parseName(t)+'</p><p class="popup_type">'+e.parseType(t)+'</p><p class="popup_time"><md-icon class="popup_icon" md-svg-src="./assets/images/update_icon.svg"></md-icon>'+e.parseTime(t)+'</p></div><div class="popup_bottom"><p class="popup_location"><md-icon class="popup_icon" md-svg-src="./assets/images/location_icon_dark.svg"></md-icon>'+e.parseLocation(t)+'</p><div class="popup_labels">'+o(e.parseLabels(t),"label")+o(e.parseUserTags(t),"tag")+"</div></div></div>",this.icon=e.getIcon(e.parseLabels(t)),this.layer="realworld",this.focus=!1,this.myData={id:e.parseId(t),labels:e.parseLabels(t)}}function o(t,e){return e||(e="tag"),_.reduce(t,function(t,a){return t.concat('<span class="'+e+'">'+a+"</span>")},"")}return a}])}(),function(){"use strict";angular.module("app.components").factory("PreviewKit",["Kit",function(t){function e(e){t.call(this,e),this.dropdownOptions=[{text:"SET UP",value:"1",href:"kits/edit/"+this.id+"?step=2"},{text:"EDIT",value:"2",href:"kits/edit/"+this.id}]}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e}])}(),function(){"use strict";angular.module("app.components").factory("Kit",["Sensor","kitUtils",function(t,e){function a(t){this.id=t.id,this.name=t.name,this.type=e.parseType(t),this.location=e.parseLocation(t),this.avatar=e.parseAvatar(t,this.type),this.labels=e.parseLabels(t),this.state=e.parseState(t),this.userTags=t.user_tags}return a}])}(),function(){"use strict";angular.module("app.components").factory("HasSensorKit",["Kit",function(t){function e(e){t.call(this,e),this.data=e.data.sensors,this.longitude=e.data.location.longitude,this.latitude=e.data.location.latitude}return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,e.prototype.sensorsHasData=function(){var t=this.data.map(function(t){return t.value});return _.some(t,function(t){return!!t})},e}])}(),function(){"use strict";angular.module("app.components").factory("FullKit",["Kit","Sensor","kitUtils",function(t,e,a){function o(e){t.call(this,e),this.version=a.parseVersion(e),this.time=a.parseTime(e),this.timeParsed=this.time?moment(this.time).format("MMMM DD, YYYY - HH:mm"):"No time",this.timeAgo=this.time?moment(this.time).fromNow():"No time",this["class"]=a.classify(a.parseType(e)),this.description=e.description,this.owner=a.parseOwner(e),this.data=e.data.sensors,this.latitude=e.data.location.latitude,this.longitude=e.data.location.longitude,this.macAddress=e.mac_address,this.elevation=e.data.location.elevation}return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype.getSensors=function(t,a){var o=_(this.data).chain().map(function(a){return new e(a,t)}).tap(function(t){"compare"===a.type&&t.unshift({name:"NONE",color:"white",id:-1})}).value();return o.reduce(function(t,e,o,n){return"BATTERY"===e.name&&(n.splice(o,1),"main"===a.type?(t[0]=n,t[1]=e):"compare"===a.type&&(t=n)),t},[])},o}])}(),function(){"use strict";function t(){return{restrict:"A",scope:{},templateUrl:"app/core/animation/backdrop/noDataBackdrop.html",controller:["$scope","$timeout",function(t,e){function a(){location.hash="",location.hash="#disqus_thread"}var o=this;o.kitWithoutData=!1,o.scrollToComments=a,t.$on("kitWithoutData",function(t,a){e(function(){o.kitWithoutData=!0,o.user=a.belongsToUser?"owner":"visitor"},0)})}],controllerAs:"vm"}}angular.module("app.components").directive("noDataBackdrop",t),t.$inject=[]}(),function(){"use strict";function t(){return{templateUrl:"app/core/animation/backdrop/loadingBackdrop.html",controller:["$scope",function(t){var e=this;e.isViewLoading=!0,e.mapStateLoading=!1,t.$on("viewLoading",function(){e.isViewLoading=!0,angular.element("#doorbell-button").hide()}),t.$on("viewLoaded",function(){e.isViewLoading=!1,angular.element("#doorbell-button").show()}),t.$on("mapStateLoading",function(){e.isViewLoading||(e.mapStateLoading=!0)}),t.$on("mapStateLoaded",function(){e.mapStateLoading=!1})}],controllerAs:"vm"}}angular.module("app.components").directive("loadingBackdrop",t),t.$inject=[]}(),function(){"use strict";function t(t,e,a,o,n,i,r,s,l,c,d,u,m,p,f,g,h,v,y,b,w,k){function S(){g(function(){E(),N(),U(),d.viewLoaded(),d.mapStateLoaded()},1e3);var t=a.id;t&&""!==t?y.getDevice(t).then(function(t){return Q.kit=new r(t),Q.kit&&(Z=M(),d.kitLoaded({lat:Q.kit.latitude,lng:Q.kit.longitude,id:parseInt(a.id)}),Y(Q.kit).then(function(t){Q.ownerKits=t,Q.sampleKits=o("limitTo")(Q.ownerKits,5)}),"never published"===Q.kit.state.name||"not configured"===Q.kit.state.name?(Q.kitBelongsToUser?h.info.noData.owner(a.id):h.info.noData.visitor(),g(function(){d.kitWithoutData({belongsToUser:Q.kitBelongsToUser})},1e3)):c.isWithin(1,"months",Q.kit.time)||h.info.longTime()),i.callAPI()}).then(function(t){var e;return e=t.plain(),v.all([j(Q.kit,e),H(Q.kit,e)])}).then(function(t){var e=t[0],a=t[1];Q.battery=e[1],Q.sensors=e[0],Q.sensorsToCompare=a,Q.selectedSensor=Q.sensors?Q.sensors[0].id:void 0}):w.isHTML5GeolocationGranted()&&K()}function T(){var t=s.alert().title("Delete your account?").content("If you wish to remove you account completely, please contact our support team at support@smartcitizen.me").ariaLabel("").ok("OK!").theme("primary").clickOutsideToClose(!0);s.show(t)}function C(t){Q.selectedSensor=t}function P(t){var e=angular.element(".sensors_container"),a=e.scrollLeft(),o=20;"left"===t?e.scrollLeft(a+o):"right"===t&&e.scrollLeft(a-o)}function A(){return Q.sensors?Q.sensors.filter(function(t){return t.id!==Q.selectedSensor}):[]}function I(t,e){t[0]&&(e||(e={}),e.from=e&&e.from||Z.getValuePickerFrom(),e.to=e&&e.to||Z.getValuePickerTo(),Q.loadingChart=!0,v.all(_.map(t,function(t){return O(a.id,t,e.from,e.to).then(function(t){return t})})).then(function(){Q.chartDataMain=x([V,J])}))}function O(t,e,a,o){return i.getSensorsDataNew(t,e,a,o).then(function(t){return X[e]=t.readings,t})}function x(t){var e,a=D(X,t[0]),o={data:a,color:Q.selectedSensorData.color,unit:Q.selectedSensorData.unit};if(t[1]&&-1!==t[1]){var n=D(X,t[1]);e={data:n,color:Q.selectedSensorToCompareData.color,unit:Q.selectedSensorToCompareData.unit}}var i=[o,e];return i}function D(t,e){return 0===t.length?[]:t[e].map(function(t){var e=t[0],a=t[1],o=null===a?0:a;return{time:e,count:o,value:a}})}function L(t){var e=t.value;void 0!==e&&("main"===t.type?V=e:"compare"===t.type&&(J=e))}function E(){var t=angular.element(".sensor_icon_selected"),e=t.find(".container_parent");e.css("fill",Q.selectedSensorData.color)}function R(){var t=angular.element(".sensor_compare").find("md-select-label").find("span");t.css("color",Q.selectedSensorToCompareData.color||"white");var e=angular.element(".sensor_compare").find("md-select-label").find(".md-select-icon");e.css("color","white")}function N(){var t;t=angular.element(".chart_move_left").find("svg"),t.find(".fill_container").css("fill","#03252D"),t=angular.element(".chart_move_right").find("svg"),t.find(".fill_container").css("fill","#4E656B")}function U(){var t=angular.element(".kit_time_icon");t.find(".stroke_container").css({"stroke-width":"0.5px",stroke:"#A4B0B3"}),t.find(".fill_container").css("fill","#A4B0B3")}function $(t){return new Date(t).getTime()}function z(){var t=moment(Z.getValuePickerTo()),e=moment(Z.getValuePickerFrom());return t.diff(e)/1e3}function F(t){var e,a,o=z(),n=angular.element("#picker_from").pickadate("picker"),i=angular.element("#picker_to").pickadate("picker");if("left"===t)e=moment(Z.getValuePickerFrom()),a=moment(Z.getValuePickerFrom()).subtract(o,"seconds"),n.hours=a.hours(),n.minutes=a.minutes(),i.hours=e.hours(),i.minutes=e.minutes(),Z.setValuePickers([a.toDate(),e.toDate()]);else if("right"===t){var r=c.getToday(),s=Z.getValuePickerTo();if(c.isSameDay(r,$(s)))return;a=moment(Z.getValuePickerTo()),e=moment(Z.getValuePickerTo()).add(o,"seconds"),n.hours=a.hours(),n.minutes=a.minutes(),i.hours=e.hours(),i.minutes=e.minutes(),Z.setValuePickers([a.toDate(),e.toDate()])}q()}function M(){function t(){return $(new Date)}function e(){return $(t()-6048e5)}function a(){var t=moment(),e=moment(Q.kit.time),a=t.diff(e,"days"),o=3*a;return e.subtract(o,"days").valueOf()}var o="single",n=angular.element("#picker_from").pickadate({onOpen:function(){ga("send","event","Kit Chart","click","Date Picker"),Q.resetTimeOpts()},onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),i=n.pickadate("picker"),r=angular.element("#picker_to").pickadate({onOpen:function(){ga("send","event","Kit Chart","click","Date Picker"),Q.resetTimeOpts()},onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),s=r.pickadate("picker");return i.get("value")&&s.set("min",i.get("select")),s.get("value")&&i.set("max",s.get("select")),i.on("set",function(t){if(t.select){if(s.get("value")&&"single"===o){var e=[V,J];e=e.filter(function(t){return t});var a,n;i.hours&&(a=moment(i.get("select").obj).hour(i.hours).minutes(i.minutes)),s.hours&&(n=moment(s.get("select").obj).hour(s.hours).minutes(s.minutes)),I(e,{from:a||i.get("value"),to:n||s.get("value")})}s.set("min",i.get("select"))}else"clear"in t&&s.set("min",!1)}),s.on("set",function(t){if(t.select){if(i.get("value")){var e=[V,J];e=e.filter(function(t){return t});var a,o;i.hours&&(a=moment(i.get("select").obj).hour(i.hours).minutes(i.minutes)),s.hours&&(o=moment(s.get("select").obj).hour(s.hours).minutes(s.minutes)),I(e,{from:a||i.get("value"),to:o||s.get("value")})}i.set("max",s.get("select"))}else"clear"in t&&i.set("max",!1)}),s.set("max",new Date),Q.kit&&(c.isWithin(7,"days",Q.kit.time)||!Q.kit.time?i.set("select",e()):i.set("select",a()),s.set("select",t())),{getValuePickerFrom:function(){var t;return i.hours&&(t=moment(i.get("select").obj).hour(i.hours).minutes(i.minutes)),t||i.get("value")},setValuePickerFrom:function(t){o="single",i.hours=t.getHours(),i.minutes=t.getMinutes(),i.set("select",t)},getValuePickerTo:function(){var t;return s.hours&&(t=moment(s.get("select").obj).hour(s.hours).minutes(s.minutes)),t||s.get("value")},setValuePickerTo:function(t){s.hours=t.getHours(),s.minutes=t.getMinutes(),o="single",s.set("select",t)},setValuePickers:function(t){var e=t[0],a=t[1];i.hours=e.getHours(),i.minutes=e.getMinutes(),s.hours=a.getHours(),s.minutes=a.getMinutes(),o="pair",i.set("select",e),s.set("select",a)}}}function K(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){if(!e)return void h.error("Please, allow smartcitizen to geolocate yourposition so we can find a kit near you.");w.grantHTML5Geolocation();var a={lat:e.coords.latitude,lng:e.coords.longitude};y.getDevices(a).then(function(e){e=e.plain(),_(e).chain().map(function(t){return new b(t)}).filter(function(t){return!!t.longitude&&!!t.latitude}).find(function(t){return _.contains(t.labels,"online")}).tap(function(a){te&&(a?t.go("layout.home.kit",{id:a.id}):t.go("layout.home.kit",{id:e[0].id}))}).value()})})}function B(t){s.show({hasBackdrop:!0,controller:"DownloadDialogController",controllerAs:"downloadDialog",templateUrl:"app/components/download/downloadDialog.html",clickOutsideToClose:!0,locals:{thisKit:t}}).then(function(){var t=s.alert().title("SUCCESS").content("We are processing your data. Soon you will be notified in your inbox").ariaLabel("").ok("OK!").theme("primary").clickOutsideToClose(!0);s.show(t)})["catch"](function(t){if(t){var e=s.alert().title("ERROR").content("Uh-oh, something went wrong").ariaLabel("").ok("D'oh").theme("primary").clickOutsideToClose(!1);s.show(e)}})}function j(t,e){return t?t.getSensors(e,{type:"main"}):void 0}function H(t,e){return Q.kit?t.getSensors(e,{type:"compare"}):void 0}function Y(t){if(!t)return void 0;var e=t.owner.kits;return v.all(e.map(function(t){return y.getDevice(t).then(function(t){return new k(t)})}))}function G(t){var e=moment(),a=moment().subtract(1,t);Z.setValuePickers([a.toDate(),e.toDate()])}function W(){Q.dropDownSelection&&G(Q.dropDownSelection)}function q(){Q.dropDownSelection=void 0}var V,J,Z,Q=this,X=[];Q.kit=void 0,Q.ownerKits=[],Q.sampleKits=[],Q.kitBelongsToUser=l,Q.removeUser=T,Q.battery={},Q.sensors=[],Q.sensorsToCompare=[],Q.slide=P,Q.legacyApiKey=l?m.getCurrentUser().data.key:void 0,Q.selectedSensor={},Q.selectedSensorData={},Q.selectedSensorToCompare=void 0,Q.selectedSensorToCompareData={},Q.setFromLast=G,Q.showSensorOnChart=C,Q.moveChart=F,Q.loadingChart=!0,Q.geolocate=K,Q.downloadData=B,Q.timeOpt=["hour","day","month"],Q.timeOptSelected=W,Q.resetTimeOpts=q;var te=!0;e.$watch("vm.selectedSensor",function(t){(0!==Object.getOwnPropertyNames(t).length||"number"==typeof t)&&(Q.selectedSensorToCompare=void 0,Q.selectedSensorToCompareData={},Q.chartDataCompare=[],J=void 0,Q.sensors&&Q.sensors.forEach(function(e){e.id===t&&_.extend(Q.selectedSensorData,e)}),Q.sensorsToCompare=A(),g(function(){E(),R(),L({type:"main",value:t}),Z&&I([V])},100))}),e.$watch("vm.selectedSensorToCompare",function(t,e){Q.sensorsToCompare.forEach(function(e){e.id===t&&_.extend(Q.selectedSensorToCompareData,e)}),g(function(){R(),L({type:"compare",value:t}),(void 0!==e||void 0!==t)&&I([J])},100)}),e.$on("hideChartSpinner",function(){Q.loadingChart=!1}),e.$on("$destroy",function(){te=!1}),S()}angular.module("app.components").controller("KitController",t),t.$inject=["$state","$scope","$stateParams","$filter","utils","sensor","FullKit","$mdDialog","belongsToUser","timeUtils","animation","$location","auth","kitUtils","userUtils","$timeout","alert","$q","device","HasSensorKit","geolocation","PreviewKit"]}(),function(){"use strict";function t(t){function e(e,a){t.scktool().then(function(){$(a).sckapp(),$(a).on("sck_info",function(t,a){e.vm.macAddress=a.mac,e.$apply()})})}return{restrict:"A",link:e,scope:!1}}angular.module("app.components").directive("setuptool",t),t.$inject=["scktoolService"]}(),function(){"use strict";function t(t,e){function a(){o(s[l])}function o(e){t.loadScript(e).then(function(){n()})}function n(){return l++,l<s.length?void o(s[l]):void r.resolve()}function i(){return r.promise}var r=e.defer(),s=["scripts/scktool-app.js","scripts/scktool-connector.js"],l=0,c={scktool:i};return a(),c}angular.module("app.components").service("scktoolService",t),t.$inject=["angularLoad","$q","$rootScope"]}(),function(){"use strict";function t(t,e,a,o,n,i,r){function s(){a.viewLoaded(),m()}function l(){window.navigator.geolocation.getCurrentPosition(function(e){t.$apply(function(){var t=e.coords.latitude,a=e.coords.longitude;f.kitForm.location.lat=t,f.kitForm.location.lng=a,f.markers.main.lat=t,f.markers.main.lng=a})})}function c(t){f.kitForm.tags=_.filter(f.kitForm.tags,function(e){return e.id!==t})}function d(){var t={name:f.kitForm.name,description:f.kitForm.description,exposure:p(f.kitForm.exposure),latitude:f.kitForm.location.lat,longitude:f.kitForm.location.lng,user_tags:_.pluck(f.kitForm.tags,"name").join(",")};o.createDevice(t).then(function(t){i.success("Your kit was created but has not been configured yet"),r.setCurrentUser("appLoad").then(function(){var a=t.id;e.go("layout.kitEdit",{id:a,step:2})})},function(t){f.errors=t.data.errors,i.error("There has been an error during kit set up")})}function u(){}function m(){n.getTags().then(function(t){f.tags=t})}function p(t){var e,a;isNaN(parseInt(t))?(e="name",a="value"):(e="value",a="name");var o=_.find(f.exposure,function(a){return a[e]===t});return o?o[a]:void 0}var f=this;f.step=1,f.submitStepOne=d,f.submitStepTwo=u,f.kitForm={name:void 0,exposure:void 0,location:{lat:void 0,lng:void 0,zoom:16},tags:[]},f.exposure=[{name:"indoor",value:1},{name:"outdoor",value:2}],f.tags=[],t.$watch("vm.tag",function(t){if(t){f.tag=void 0;var e=_.some(f.kitForm.tags,function(e){return e.id===t});if(!e){var a=_.find(f.tags,function(e){return e.id===t});f.kitForm.tags.push(a)}}}),f.removeTag=c,f.getLocation=l,f.markers={main:{lat:void 0,lng:void 0,draggable:!0}},f.tiles={url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"},f.defaults={scrollWheelZoom:!1},f.macAddress=void 0,s()}angular.module("app.components").controller("NewKitController",t),t.$inject=["$scope","$state","animation","device","tag","alert","auth"]}(),function(){"use strict";function t(t,e,a,o,n,i,r,s,l,c,d){function u(){var t=c.id;n.viewLoaded(),v(),t&&""!==t&&i.getDevice(t).then(function(t){b.kitData=new d(t),b.kitForm={name:b.kitData.name,exposure:(b.kitData.labels.indexOf("indoor")>=0||b.kitData.labels.indexOf("outdoor")>=0)&&h(b.kitData.labels.indexOf("indoor")?"indoor":"outdoor"),location:{lat:b.kitData.latitude,lng:b.kitData.longitude,zoom:16},tags:b.kitData.userTags,description:b.kitData.description},b.markers={main:{lat:b.kitData.latitude,lng:b.kitData.longitude,draggable:!0}}})}function m(){window.navigator.geolocation.getCurrentPosition(function(e){t.$apply(function(){var t=e.coords.latitude,a=e.coords.longitude;b.kitForm.location.lat=t,b.kitForm.location.lng=a,b.markers.main.lat=t,b.markers.main.lng=a})})}function p(t){b.kitForm.tags=_.filter(b.kitForm.tags,function(e){return e.id!==t})}function f(){var t={name:b.kitForm.name,description:b.kitForm.description,exposure:h(b.kitForm.exposure),latitude:b.kitForm.location.lat,longitude:b.kitForm.location.lng,user_tags:b.kitForm.tags.join(",")};b.macAddress&&(t.mac_address=b.macAddress),i.updateDevice(b.kitData.id,t).then(function(){s.success("Your kit was successfully updated"),ga("send","event","Kit","update")})["catch"](function(){s.error("There has been an error during kit set up"),ga("send","event","Kit","update failed")})["finally"](function(){a(function(){y()},1e3)})}function g(){e.path(e.path()).search({step:2})}function h(t){var e,a;isNaN(parseInt(t))?(e="name",a="value"):(e="value",a="name");var o=_.find(b.exposure,function(a){return a[e]===t});return o?o[a]:void 0}function v(){r.getTags().then(function(t){b.tags=t.plain()})}function y(){o.go("layout.myProfile")}var b=this;b.step=l,b.submitForm=f,b.openKitSetup=g,b.kitData=void 0,b.exposure=[{name:"indoor",value:1},{name:"outdoor",value:2}],b.kitForm={},b.backToProfile=y,b.tags=[],t.$watch("vm.tag",function(t){if(t){b.tag=void 0;var e=_.some(b.kitForm.tags,function(e){return e.id===t});if(!e){var a=_.find(b.tags,function(e){return e.id===t});b.kitForm.tags.push(a.name)}}}),b.removeTag=p,b.getLocation=m,b.markers={},b.tiles={url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"},b.defaults={scrollWheelZoom:!1},u()}angular.module("app.components").controller("EditKitController",t),t.$inject=["$scope","$location","$timeout","$state","animation","device","tag","alert","step","$stateParams","FullKit"]}(),function(){"use strict";function t(t,e,a){function o(t){var e={kitName:t.device.name,kitType:r(t),kitLastTime:moment(l(t)).fromNow(),kitLocation:n(t),kitLabels:i(t),kitClass:s(r(t))};return e}function n(t){var e="",a=t.data.location.city,o=t.data.location.country;return a&&(e+=a),o&&(e+=", "+o),e}function i(t){return{status:t.status,exposure:t.data.location.exposure}}function r(t){var e,a=t.kit?t.kit.name:"No kit property";return e=new RegExp("sck","i").test(a)?"SmartCitizen Kit":"Unknown Kit"}function s(t){return t?t.toLowerCase().split(" ").join("_"):""}function l(t){return t.updated_at}function c(t){return moment(t.recorded_at).format("")}function d(t){return moment(t).format("YYYY-MM-DDThh:mm:ss")+"Z"}function u(o){var n=a.defer(),i=0,r=[];return o.forEach(function(a,s){t.getDevice(a).then(function(t){r[s]=new e(t),i++,o.length===i&&n.resolve(r)})}),n.promise}var m={parseKit:o,parseKitTime:l,parseSensorTime:c,convertTime:d,getOwnerKits:u};return m}angular.module("app.components").factory("utils",t),t.$inject=["device","PreviewKit","$q"]}(),function(){"use strict";function t(){function t(t){return"admin"===t.role}function e(t,e){return t===e.id}var a={isAdmin:t,isAuthUser:e};return a}angular.module("app.components").factory("userUtils",t)}(),function(){"use strict";function t(){function t(t,e){if(!e)return t;var a;return"ms"===e?a=t:"s"===e?a=t/1e3:"m"===e?a=t/1e3/60:"h"===e?a=t/1e3/60/60:"d"===e&&(a=t/1e3/60/60/24),a}function e(t){return new Date(t).getTime()}function a(t,e){return moment(e).diff(moment(t),"days")}function o(a,o){return a=e(a),t(a,o)}function n(){return(new Date).getTime()}function i(){return e(n()-6048e5)}function r(t,e){return t=moment(t),e=moment(e),t.startOf("day").isSame(e.startOf("day"))?!0:!1}function s(t){var e=moment().subtract(15,"minutes").valueOf();return t=moment(t).valueOf(),t>e}function l(t){var e=moment().subtract(1,"months").valueOf();return t=moment(t).valueOf(),t>e}function c(t,e,a){var o=moment().subtract(t,e).valueOf();return a=moment(a).valueOf(),a>o}var d={getSecondsFromDate:e,getCurrentRange:a,getToday:n,getSevenDaysAgo:i,getDateIn:t,parseTime:o,isSameDay:r,isWithin15min:s,isWithin1Month:l,isWithin:c};return d}angular.module("app.components").factory("timeUtils",t)}(),function(){"use strict";function t(t){function e(e,a){var o,n=t.getCurrentRange(e,a,{format:"d"});return 1>=n?o="10m":7>=n?o="1h":n>7&&(o="1d"),o}function a(t){var e,a=t.name,o=t.description;return e=new RegExp("custom circuit","i").test(o)?a:new RegExp("noise","i").test(o)?"SOUND":new RegExp("light","i").test(o)?"LIGHT":new RegExp("wifi","i").test(o)?"NETWORKS":new RegExp("co","i").test(o)?"CO":new RegExp("no2","i").test(o)?"NO2":o,e.toUpperCase()}function o(t){var e;switch(t){case"TEMPERATURE":e="Â°C";break;case"LIGHT":e="LUX";break;case"SOUND":e="DB";break;case"HUMIDITY":case"BATTERY":e="%";break;case"CO":case"NO2":e="Kâ„¦";break;case"NETWORKS":e="#";break;case"SOLAR PANEL":e="V";break;default:e="N/A"}return e}function n(t){var e=t.value;return isNaN(parseInt(e))?e="N/A":(e=e.toString(),-1!==e.indexOf(".")&&(e=e.slice(0,e.indexOf(".")+3))),e}function i(t){var e=t.prev_value;return e&&e.toString()||0}function r(t){switch(t){case"TEMPERATURE":return"./assets/images/temperature_icon.svg";case"HUMIDITY":return"./assets/images/humidity_icon.svg";case"LIGHT":return"./assets/images/light_icon.svg";case"SOUND":return"./assets/images/sound_icon.svg";case"CO":return"./assets/images/co_icon.svg";case"NO2":return"./assets/images/no2_icon.svg";case"NETWORKS":return"./assets/images/networks_icon.svg";case"BATTERY":return"./assets/images/battery_icon.svg";case"SOLAR PANEL":return"./assets/images/solar_panel_icon.svg";default:return"./assets/images/avatar.svg"}}function s(t,e){return t=parseInt(t)||0,e=parseInt(e)||0,t>e?"./assets/images/arrow_up_icon.svg":e>t?"./assets/images/arrow_down_icon.svg":"./assets/images/equal_icon.svg"}function l(t){switch(t){case"TEMPERATURE":return"#ffc107";case"HUMIDITY":return"#4fc3f7";case"LIGHT":return"#ffee58";case"SOUND":return"#f06292";case"CO":return"#4caf50";case"NO2":return"#8bc34a";case"NETWORKS":return"#9575cd";case"SOLAR PANEL":return"#fff9c4";default:return"black"}}function c(t,e){return _(e).chain().find(function(e){return e.id===t}).value().measurement.description}var d={getRollup:e,getSensorName:a,getSensorUnit:o,getSensorValue:n,getSensorPrevValue:i,getSensorIcon:r,getSensorArrow:s,getSensorColor:l,getSensorDescription:c};return d}angular.module("app.components").factory("sensorUtils",t),t.$inject=["timeUtils"]}(),function(){"use strict";function t(){function t(t){var e="";return t.city&&(e+=t.city),t.city&&t.country&&(e+=", "),t.country&&(e+=t.country),e}function e(t){var e="User"===t.type?t.username:t.name;return e}function a(t,e){switch(e){case"User":return t.avatar;case"Device":return"assets/images/kit.svg";case"Country":case"City":return"assets/images/location_icon_normal.svg"}}function o(t){switch(t){case"Device":return"div";default:return"img"}}var n={parseLocation:t,parseName:e,parseIcon:a,parseIconType:o};return n}angular.module("app.components").factory("searchUtils",t),t.$inject=[]}(),function(){"use strict";function t(t,e,a,o){function n(e){var a,o=t.getGenericKitData();if(!o)return a="SmartCitizen Kit";if(!e.kit_id)return void(a="SmartCitizen Kit");var n=o[e.kit_id],i=n?n.name:"No name";return a=new RegExp("sck","i").test(i)?"SmartCitizen Kit":"Unknown Kit"}function i(t){var e="",o=t.city,n=t.country_code,i=a[n];return o&&(e+=o),i&&(e+=", "+i),e}function r(t){return t.system_tags}function s(t){return t.user_tags}function l(t){return{lat:t.latitude,lng:t.longitude}}function c(t){return t.id}function d(t){var e;return e=u(t,"offline")?o.markerSmartCitizenOffline:o.markerSmartCitizenOnline}function u(t,e){return _.some(t,function(t){return t===e})}function m(t){return t.name?t.name.length<=41?t.name:t.name.slice(0,35).concat(" ... "):void 0}function p(t){var e=t.data&&t.data[""];return e?moment(e).fromNow():"No time"}function f(t,e){var a=t.icon.className;if("active"===e)t.icon=o[a+"Active"],t.focus=!0;else if("inactive"===e){var n=a.split(" ")[0];t.icon=o[n]}return t}var g={parseType:n,parseLocation:i,parseLabels:r,parseUserTags:s,parseCoordinates:l,parseId:c,getIcon:d,parseName:m,parseTime:p,getMarkerIcon:f};return _.defaults(g,e),g}angular.module("app.components").factory("markerUtils",t),t.$inject=["device","kitUtils","COUNTRY_CODES","MARKER_ICONS"]}(),function(){"use strict";function t(){function t(t,e){var a={};return t.indoor||t.outdoor||(a[e.exposure]=!0),t.online||t.offline||(a[e.status]=!0),a}function e(t){var e={};return t.indoor&&t.outdoor||(e.exposure=t.indoor?"indoor":"outdoor"),t.online&&t.offline||(e.status=t.online?"online":"offline"),e}function a(t,e){return"indoor"===e||"outdoor"===e?t.indoor&&t.outdoor:"online"===e||"offline"===e?t.online&&t.offline:void 0}var o={getDefaultFilters:t,setDefaultFilters:e,canFilterBeRemoved:a};return o}angular.module("app.components").factory("mapUtils",t),t.$inject=[]}(),function(){"use strict";function t(t){function e(t){var e="",a=t.data.location.city,o=t.data.location.country;return a&&(e+=a),o&&(e+=", "+o),e}function a(t){return t.system_tags}function o(t){return t.user_tags}function n(t){var e,a=t.kit?t.kit.name:"No kit property";return e=new RegExp("sck","i").test(a)?"SmartCitizen Kit":"Unknown Kit"}function i(t){return t?t.toLowerCase().split(" ").join("_"):""}function r(t){return t.last_reading_at}function s(t){return t.kit?t.kit.name.match(/[0-9]+.?[0-9]*/)[0]:void 0}function l(e){return{id:e.owner.id,username:e.owner.username,kits:e.owner.device_ids,city:e.owner.location.city,country:t[e.owner.location.country_code],url:e.owner.url,avatar:e.owner.avatar}}function c(t){var e=d(t),a=i(e);return{name:e,className:a}}function d(t){return t.state.replace("_"," ")}function u(){return"./assets/images/sckit_avatar.jpg"}function m(t){return moment(t.recorded_at).format("")}function p(t,e){return _.some(t,function(t){return t.id===e})}var f={parseLocation:e,parseLabels:a,parseUserTags:o,parseType:n,classify:i,parseTime:r,parseVersion:s,parseOwner:l,parseState:c,parseAvatar:u,belongsToUser:p,parseSensorTime:m};return f}angular.module("app.components").factory("kitUtils",t),t.$inject=["COUNTRY_CODES","device"]}(),function(){"use strict";angular.module("app.components").config(["$provide",function(t){var e=new airbrakeJs.Client;e.setProject("561ce288daa9031312000008","791ff4af9dda4841b5ebd594ecad961e"),e.setHost("https://errors.smartcitizen.me"),t.decorator("$exceptionHandler",["$delegate",function(t){return function(a,o){a.params={angular_cause:o},e.notify(a),t(a,o)}}])}])}(),function(){"use strict";function t(){return function(t,e){return void 0===e?t:t?_.filter(t,function(t){var a=-1!==t.labels.indexOf(e);if(a)return a;var o="online"===e&&_.some(t.labels,function(t){return-1!==t.indexOf("new")});return o}):void 0}}angular.module("app.components").filter("filterLabel",t)}(),function(){"use strict";angular.module("app.components").constant("PROFILE_TOOLS",[{type:"documentation",title:"How to connect your Smart Citizen Kit tutorial",description:"Adding a Smart Citizen Kit",avatar:"",href:"http://www.google.com"},{type:"documentation",title:"Download the latest SCK Firmware",description:"Github version of the firmware",avatar:""},{type:"documentation",title:"RESTful API Documentation",description:"API Docs",avatar:""},{type:"documentation",title:"Style Guide",description:"Guidelines of the Smart Citizen UI",avatar:"",href:"/styleguide"},{type:"community",title:"Smart Citizen Forum",description:"Your feedback is important for us",avatar:""},{type:"documentation",title:"SCK Repository Documentation",description:"Fork the project",avatar:""},{type:"social",title:"Like us on Facebook",description:"Follow our news on Facebook",avatar:""},{type:"social",title:"Follow us on Twitter",description:"Discover the weather and your smart connections on Twitter",avatar:""},{type:"social",title:"Be our friend on Google+",description:"Get informed about latest news of Smart Citizen",avatar:""}])}(),function(){"use strict";angular.module("app.components").constant("MARKER_ICONS",{defaultIcon:{},markerSmartCitizenNormal:{type:"div",className:"markerSmartCitizenNormal",iconSize:[24,24]},markerSmartCitizenOnline:{type:"div",className:"markerSmartCitizenOnline",iconSize:[24,24]},markerSmartCitizenOnlineActive:{type:"div",className:"markerSmartCitizenOnline marker_blink",iconSize:[24,24]},markerSmartCitizenOffline:{type:"div",className:"markerSmartCitizenOffline",iconSize:[24,24]},markerSmartCitizenOfflineActive:{type:"div",className:"markerSmartCitizenOffline marker_blink",iconSize:[24,24]}})}(),function(){"use strict";angular.module("app.components").constant("DROPDOWN_OPTIONS_USER",[{divider:!0,text:"Hello,"},{text:"PROFILE",href:"./profile"},{text:"LOGOUT",href:"./logout"}])}(),function(){"use strict";angular.module("app.components").constant("DROPDOWN_OPTIONS_KIT",[{text:"SET UP",value:"1",href:"/kits/new"},{text:"EDIT",value:"2",href:"/kits/edit/"}])}(),function(){"use strict";angular.module("app.components").constant("DROPDOWN_OPTIONS_COMMUNITY",[{text:"About",href:"/about"},{text:"Forum",href:"https://forum.smartcitizen.me/"},{text:"Documentation",href:"http://docs.smartcitizen.me/"},{text:"API Reference",href:"http://developer.smartcitizen.me/"},{text:"Github",href:"https://github.com/fablabbcn/Smart-Citizen-Kit"},{text:"Legal",href:"/policy"}])
}(),function(){"use strict";angular.module("app.components").constant("COUNTRY_CODES",{AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"})}(),function(){"use strict";function t(t){function e(e){return t.all("users").post(e)}function a(e){return t.one("users",e).get()}function o(e){return t.all("me").customPUT(e)}var n={createUser:e,getUser:a,updateUser:o};return n}angular.module("app.components").factory("user",t),t.$inject=["Restangular"]}(),function(){"use strict";function t(t){function e(){return t.all("tags").getList()}var a={getTags:e};return a}angular.module("app.components").factory("tag",t),t.$inject=["Restangular"]}(),function(){"use strict";function t(t,e,a){function o(){return t.all("sensors").getList()}function n(t){t=t}function i(){return l}function r(o,n,i){var r=a.getRollup(n,i);return n=e.convertTime(n),i=e.convertTime(i),n&&i?t.one("devices",o).customGET("pg_readings",{from:n,to:i,all_intervals:!0,rollup:r}):t.one("devices",o).customGET("pg_readings")}function s(o,n,i,r){var s=a.getRollup(i,r);return i=e.convertTime(i),r=e.convertTime(r),t.one("devices",o).customGET("readings",{from:i,to:r,rollup:s,sensor_id:n,all_intervals:!0})}var l;o().then(function(t){n(t)});var c={callAPI:o,setTypes:n,getTypes:i,getSensorsData:r,getSensorsDataNew:s};return c}angular.module("app.components").factory("sensor",t),t.$inject=["Restangular","utils","sensorUtils"]}(),function(){"use strict";function t(t,e){function a(t){return e.all("search").getList({q:t})}var o={globalSearch:a};return o}angular.module("app.components").factory("search",t),t.$inject=["$http","Restangular"]}(),function(){"use strict";function t(t,e){function a(){o()}function o(){return i().success(function(t){var e=t.loc.split(",");return l={lat:parseFloat(e[0]),lng:parseFloat(e[1])}})}function n(){return l}function i(){return t.jsonp("http://ipinfo.io/?callback=JSON_CALLBACK")}function r(){e.localStorage.setItem("smartcitizen.geolocation_granted",!0)}function s(){return e.localStorage.getItem("smartcitizen.geolocation_granted")}var l;a();var c={getPosition:o,callAPI:i,getPositionObj:n,grantHTML5Geolocation:r,isHTML5GeolocationGranted:s};return c}angular.module("app.components").factory("geolocation",t),t.$inject=["$http","$window"]}(),function(){"use strict";function t(t,e){function a(e){var a={filename:e};return t.all("me/avatar").post(a)}function o(t,a,o,n){return e.upload({url:"https://smartcitizen.s3-eu-west-1.amazonaws.com",method:"POST",fields:{key:a,policy:o,signature:n,AWSAccessKeyId:"AKIAJ753OQI6JPSDCPHA",acl:"public-read",success_action_status:200},file:t})}function n(t,e){return e=void 0===e?"s101":e,"https://images.smartcitizen.me/"+e+"/"+t}var i={getCredentials:a,uploadFile:o,getImageURL:n};return i}angular.module("app.components").factory("file",t),t.$inject=["Restangular","Upload"]}(),function(){"use strict";function t(t,e,a){function o(){f()&&g()}function n(e){var a="";return a+=e.lat+","+e.lng,t.all("devices").getList({near:a,per_page:"100"})}function i(){return t.all("devices/world_map").getList()}function r(e){return t.one("devices",e).get()}function s(e){return t.all("devices").post(e)}function l(e,a){return t.one("devices",e).patch(a)}function c(){return t.all("kits").getList()}function d(){return v}function u(){return y||e.localStorage.getItem("smartcitizen.markers")&&JSON.parse(e.localStorage.getItem("smartcitizen.markers")).data}function m(t){var a={timestamp:new Date,data:t};e.localStorage.setItem("smartcitizen.markers",JSON.stringify(a)),y=a.data}function p(){return e.localStorage.getItem("smartcitizen.markers")&&JSON.parse(e.localStorage.getItem("smartcitizen.markers")).timestamp}function f(){var t=p();return!a.isWithin15min(t)}function g(){e.localStorage.removeItem("smartcitizen.markers")}function h(e){return t.one("devices",e.id).customGET("readings/csv_archive")}var v,y;o(),c().then(function(t){v=_.indexBy(t,"id")});var b={getDevices:n,getAllDevices:i,getDevice:r,createDevice:s,updateDevice:l,getGenericKitData:d,getWorldMarkers:u,setWorldMarkers:m,mailReadings:h};return b}angular.module("app.components").factory("device",t),t.$inject=["Restangular","$window","timeUtils","$http"]}(),function(){"use strict";function t(t,e,a,o,n,i,r,s){function l(){c("appLoad")}function c(o){return _.token=e.localStorage.getItem("smartcitizen.token")&&JSON.parse(e.localStorage.getItem("smartcitizen.token")),_.data=e.localStorage.getItem("smartcitizen.data")&&new i(JSON.parse(e.localStorage.getItem("smartcitizen.data"))),_.token?h().then(function(l){e.localStorage.setItem("smartcitizen.data",JSON.stringify(l.plain()));var c=new i(l);_.data&&_.data.role!==c.role&&(_.data=c,t.path("/")),_.data=c,o&&"appLoad"===o?r(function(){n.$broadcast("loggedIn",{time:"appLoad"})},3e3):(a.reload(),r(function(){s.success("Login was successful"),n.$broadcast("loggedIn",{})},2e3))}):void 0}function d(){return h().then(function(t){e.localStorage.setItem("smartcitizen.data",JSON.stringify(t.plain()))})}function u(){return _}function m(){return!!e.localStorage.getItem("smartcitizen.token")}function p(t){e.localStorage.setItem("smartcitizen.token",JSON.stringify(t)),c()}function f(t){return o.all("sessions").post(t)}function g(){e.localStorage.removeItem("smartcitizen.token"),e.localStorage.removeItem("smartcitizen.data")}function h(){return o.all("").customGET("me")}function v(t){return o.all("password_resets").post(t)}function y(t){return o.one("password_resets",t).get()}function b(t,e){return o.one("password_resets",t).patch(e)}function w(t){return"admin"===t.role}var _={token:e.localStorage.getItem("smartcitizen.token")&&JSON.parse(e.localStorage.getItem("smartcitizen.token")),data:e.localStorage.getItem("smartcitizen.data")&&new i(JSON.parse(e.localStorage.getItem("smartcitizen.data")))};r(function(){l()},100);var k={isAuth:m,setCurrentUser:c,getCurrentUser:u,updateUser:d,saveData:p,login:f,logout:g,recoverPassword:v,getResetPassword:y,patchResetPassword:b,isAdmin:w};return k}angular.module("app.components").factory("auth",t),t.$inject=["$location","$window","$state","Restangular","$rootScope","AuthUser","$timeout","alert"]}(),function(){"use strict";function t(){function t(t,e){t.element=e}function e(t){t.slidePosition=0,t.slideSize=20,this.getTimesSlided=function(){return t.slideSize},this.getPosition=function(){return t.slidePosition*t.slideSize},this.decrementPosition=function(){t.slidePosition-=1},this.incrementPosition=function(){t.slidePosition+=1},this.scrollIsValid=function(e){var a=t.element.scrollLeft();return console.log("scrollpos",a),"left"===e?a>0&&t.slidePosition>=0:"right"===e?300>a:void 0}}return e.$inject=["$scope"],{controller:e,link:t}}function e(){function t(t,e,a,o){var n=angular.element(".sensors_container");e.on("click",function(){o.scrollIsValid("left")&&"left"===a.direction?(o.decrementPosition(),n.scrollLeft(o.getPosition()),console.log(o.getPosition())):o.scrollIsValid("right")&&"right"===a.direction&&(o.incrementPosition(),n.scrollLeft(o.getPosition()),console.log(o.getPosition()))})}return{link:t,require:"^slide-menu",restrict:"A",scope:{direction:"@"}}}angular.module("app.components").directive("slide",e).directive("slideMenu",t),e.$inject=[]}(),function(){"use strict";function t(){function t(t,e){e.on("mouseenter",function(){angular.element(".sensor_data_description").css("display","inline-block")}),e.on("mouseleave",function(){angular.element(".sensor_data_description").css("display","none")})}return{link:t}}angular.module("app.components").directive("showPopupInfo",t),t.$inject=[]}(),function(){"use strict";function t(){function t(t,e){e.on("click",function(){var t=angular.element(".sensor_description_preview").text();t.length<140||(angular.element(".sensor_description_preview").hide(),angular.element(".sensor_description_full").show())})}return{link:t}}angular.module("app.components").directive("showPopup",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function a(a,o){var n;e(function(){n=angular.element(".kit_chart").height()},1e3),angular.element(t).on("scroll",function(){var t=document.body.scrollTop;n>t&&o.css("bottom",12+t+"px")})}return{link:a}}angular.module("app.components").directive("moveFilters",t),t.$inject=["$window","$timeout"]}(),function(){"use strict";function t(){function t(t){a=t}function e(){return a}var a,o={setKit:t,getKit:e};return o}angular.module("app.components").factory("layout",t)}(),function(){"use strict";function t(t,e){function a(a,o){o.on("scroll",function(){var t=angular.element(this).scrollLeft(),e=this.scrollWidth,a=angular.element(this).width();return e===a&&(angular.element(".button_scroll_left").css("opacity","0.5"),angular.element(".button_scroll_right").css("opacity","0.5")),e-a>2&&(angular.element(".button_scroll_left").css("opacity","1"),angular.element(".button_scroll_right").css("opacity","1")),2>=e-a-t?void angular.element(".button_scroll_right").css("opacity","0.5"):0===t?void angular.element(".button_scroll_left").css("opacity","0.5"):(angular.element(".button_scroll_left").css("opacity","1"),void angular.element(".button_scroll_right").css("opacity","1"))}),e(function(){o.trigger("scroll")}),angular.element(t).on("resize",function(){e(function(){o.trigger("scroll")},1e3)})}return{link:a,restrict:"A"}}angular.module("app.components").directive("horizontalScroll",t),t.$inject=["$window","$timeout"]}(),function(){"use strict";function t(){function t(t,e){e.on("mouseleave",function(){angular.element(".sensor_description_preview").show(),angular.element(".sensor_description_full").hide()})}return{link:t}}angular.module("app.components").directive("hidePopup",t),t.$inject=[]}(),function(){"use strict";function t(t){function e(e){console.log("i",e),e.on("click",function(){console.log("e"),angular.element(document.body).css("overflow","hidden"),t(function(){angular.element(document.body).css("overflow","initial")})})}return{compile:e,restrict:"A",priority:1e5}}angular.module("app.components").directive("disableScroll",t),t.$inject=["$timeout"]}(),function(){"use strict";function t(t){function e(){t.$broadcast("blur")}function a(){t.$broadcast("unblur")}function o(){t.$broadcast("removeNav")}function n(){t.$broadcast("addNav")}function i(){t.$broadcast("showChartSpinner")}function r(){t.$broadcast("hideChartSpinner")}function s(e){t.$broadcast("kitLoaded",e)}function l(){t.$broadcast("showPasswordRecovery")}function c(){t.$broadcast("showLogin")}function d(){t.$broadcast("showSignup")}function u(){t.$broadcast("showPasswordReset")}function m(){t.$broadcast("hideAlert")}function p(){t.$broadcast("viewLoading")}function f(){t.$broadcast("viewLoaded")}function g(e){t.$broadcast("kitWithoutData",e)}function h(e){t.$broadcast("goToLocation",e)}function v(){t.$broadcast("mapStateLoading")}function y(){t.$broadcast("mapStateLoaded")}var b={blur:e,unblur:a,removeNav:o,addNav:n,showChartSpinner:i,hideChartSpinner:r,kitLoaded:s,showPasswordRecovery:l,showLogin:c,showSignup:d,showPasswordReset:u,hideAlert:m,viewLoading:p,viewLoaded:f,kitWithoutData:g,goToLocation:h,mapStateLoading:v,mapStateLoaded:y};return b}angular.module("app.components").factory("animation",t),t.$inject=["$rootScope"]}(),function(){"use strict";function t(){function t(t,e){t.$watch("moveDown",function(t){t?e.addClass("move_down"):e.removeClass("move_down")})}return{link:t,scope:!1,restrict:"A"}}function e(t,e){function a(a,o){var n=o[0].offsetTop,i=angular.element(".stickNav").height();e(function(){n=o[0].offsetTop,i=angular.element(".stickNav").height()},1e3),angular.element(t).on("scroll",function(){var t=document.body.scrollTop;t+i>=n?(o.addClass("stickMenu"),a.$apply(function(){a.moveDown=!0})):(o.removeClass("stickMenu"),a.$apply(function(){a.moveDown=!1}))})}return{link:a,scope:!1,restrict:"A"}}function a(){function t(t,e){t.$on("blur",function(){e.addClass("blur")}),t.$on("unblur",function(){e.removeClass("blur")})}return{link:t,scope:!1,restrict:"A"}}function o(t){function e(e,a){a.on("focusin",function(){t.removeNav()}),a.on("focusout",function(){t.addNav()});var o=a.find("input");o.on("blur",function(){angular.element(document.body).css("overflow","auto")}),o.on("focus",function(){angular.element(document.body).css("overflow","hidden")})}return{link:e}}function n(t,e,a){function o(e,o){var n=t[0].body.clientHeight,i=angular.element(".stickNav").height();a(function(){var t=angular.element(".kit_overview").height(),e=angular.element(".kit_menu").height(),a=(angular.element(".kit_chart").height(),n-i-e-t);o.css("height",a+"px")})}return{link:o,scope:!0,restrict:"A"}}function i(t,e,a){function o(t,e){var o=a[0].body.clientHeight,n=angular.element(".kit_overview").height(),i=angular.element(".kit_menu").height(),r=(angular.element(".kit_chart").height(),o-i-n);e.css("margin-top",r+"px")}return{link:o}}function r(t){function e(e,a){t(function(){a.focus()})}return{link:e}}angular.module("app.components").directive("moveDown",t).directive("stick",e).directive("blur",a).directive("focus",o).directive("changeMapHeight",n).directive("changeContentMargin",i).directive("focusInput",r),t.$inject=[],e.$inject=["$window","$timeout"],o.$inject=["animation"],n.$inject=["$document","layout","$timeout"],i.$inject=["layout","$timeout","$document"],r.$inject=["$timeout"]}(),function(){"use strict";function t(t,e){function a(a,o){function n(t){l&&angular.element(e).scrollTop(t-l.navbar.height-l.kitMenu.height)}function i(t){return c[t]}function r(){var t=angular.element(".md-button.button_active");if(t.length){t.removeClass("button_active");var e=t.find(".stroke_container");e.css("stroke","none"),e.css("stroke-width","1");var a=e.find(".fill_container");a.css("fill","#82A7B0")}}function s(t){var e=angular.element(t);e.addClass("button_active");var a=e.find(".stroke_container");a.css("stroke","white"),a.css("stroke-width","0.01px");var o=a.find(".fill_container");o.css("fill","white")}var l,c=o.children();t(function(){var t=angular.element(".stickNav"),e=angular.element(".kit_menu"),a=angular.element(".kit_overview"),o=angular.element(".kit_chart"),n=angular.element(".kit_details"),i=angular.element(".kit_owner"),r=angular.element(".kit_comments");l={navbar:{height:t.height()},kitMenu:{height:e.height()},kitOverview:{height:a.height(),offset:a.offset().top,buttonOrder:0},kitDashboard:{height:o.height(),offset:o.offset().top,buttonOrder:40},kitDetails:{height:n.height(),offset:n.offset()?n.offset().top:0,buttonOrder:1},kitOwner:{height:i.height(),offset:i.offset()?i.offset().top:0,buttonOrder:2},kitComments:{height:r.height(),offset:r.offset()?r.offset().top:0,buttonOrder:3}}},1e3),_.each(c,function(t){angular.element(t).on("click",function(){var t=angular.element(this).index();for(var a in l)if(l[a].buttonOrder===t){var o=l[a].offset;n(o),angular.element(e).trigger("scroll")}})});var d;angular.element(e).on("scroll",function(){if(l){var t,e=document.body.scrollTop,a=e+l.navbar.height+l.kitMenu.height;"none"!==d&&a<=l.kitOverview.offset?(t=i(l.kitOverview.buttonOrder),r(),d="none"):"overview"!==d&&a>=l.kitOverview.offset&&a<=l.kitOverview.offset+l.kitOverview.height?(t=i(l.kitOverview.buttonOrder),r(),s(t),d="overview"):"details"!==d&&a>=l.kitDetails.offset&&a<=l.kitDetails.offset+l.kitDetails.height?(t=i(l.kitDetails.buttonOrder),r(),s(t),d="details"):"owner"!==d&&a>=l.kitOwner.offset&&a<=l.kitOwner.offset+l.kitOwner.height?(t=i(l.kitOwner.buttonOrder),r(),s(t),d="owner"):"comments"!==d&&a>=l.kitComments.offset&&a<=l.kitComments.offset+l.kitOwner.height&&(t=i(l.kitComments.buttonOrder),r(),s(t),d="comments")}})}return{link:a,restrict:"A"}}angular.module("app.components").directive("activeButton",t),t.$inject=["$timeout","$window"]}(),function(){"use strict";function t(t,e,a,o,n,i,r,s,l,c,d,u,m){function p(){n.getUser(v).then(function(t){h.user=new d(t);var e=_.pluck(h.user.kits,"id");return e.length?u.all(e.map(function(t){return i.getDevice(t).then(function(t){return new m(t)})})):[]}).then(function(t){t&&(h.kits=t)}),l(function(){g(),c.viewLoaded()},500)}function f(t){"all"===t&&(t=void 0),h.status=t}function g(){var t=document.body.clientHeight/4*3;angular.element(".profile_content").css("min-height",t+"px")}var h=this,v=parseInt(e.id);h.status=void 0,h.user={},h.kits=[],h.filteredKits=[],h.filterKits=f,t.$on("loggedIn",function(){var t=r.getCurrentUser().data;s.isAuthUser(v,t)&&a.path("/profile")}),p()}angular.module("app.components").controller("UserProfileController",t),t.$inject=["$scope","$stateParams","$location","utils","user","device","auth","userUtils","$timeout","animation","NonAuthUser","$q","PreviewKit"]}(),function(){"use strict";function t(){return{scope:{isLoggedin:"=logged"},restrict:"A",controller:"StoreController",controllerAs:"vm",templateUrl:"app/components/store/store.html"}}angular.module("app.components").directive("store",t)}(),function(){"use strict";function t(t,e){function a(){e.show({hasBackdrop:!0,controller:"StoreDialogController",templateUrl:"app/components/store/storeModal.html",clickOutsideToClose:!0})}t.showStore=a,t.$on("showStore",function(){a()})}angular.module("app.components").controller("StoreController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(t,e,a){function o(){t(function(){e.viewLoaded()},500)}function n(){a.show({hasBackdrop:!0,controller:"StoreDialogController",templateUrl:"app/components/store/storeModal.html",clickOutsideToClose:!0})}var i=this;i.showStore=n,o()}angular.module("app.components").controller("StaticController",t),t.$inject=["$timeout","animation","$mdDialog"]}(),function(){"use strict";function t(){return{scope:{show:"="},restrict:"A",controller:"SignupController",controllerAs:"vm",templateUrl:"app/components/signup/signup.html"}}angular.module("app.components").directive("signup",t)}(),function(){"use strict";function t(t,e){function a(){e.show({hasBackdrop:!0,controller:"SignupDialogController",templateUrl:"app/components/signup/signupModal.html",clickOutsideToClose:!0})}var o=this;o.showSignup=a,t.$on("showSignup",function(){a()})}angular.module("app.components").controller("SignupController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(){return{scope:!0,restrict:"E",templateUrl:"app/components/search/search.html",controller:"SearchController",controllerAs:"vm"}}angular.module("app.components").directive("search",t)}(),function(){"use strict";function t(t,e,a,o,n,i){function r(){}function s(t){"User"===t.type?o.path("/users/"+t.id):"Device"===t.type?o.path("/kits/"+t.id):"City"===t.type&&n.goToLocation({lat:t.lat,lng:t.lng,type:t.type,layer:t.layer})}function l(t){return t.length<3?[]:(ga("send","event","Search Input","search",t),e.globalSearch(t).then(function(t){return 0===t.length?(angular.element(document.body).css("overflow","auto"),t):(angular.element(document.body).css("overflow","hidden"),t.map(function(t){return"City"===t.type||"Country"===t.type?new i(t):new a(t)}))}))}var c=this;c.searchTextChange=r,c.selectedItemChange=s,c.querySearch=l,c.isIconWhite=!0,t.$on("removeNav",function(){c.isIconWhite=!1}),t.$on("addNav",function(){c.isIconWhite=!0})}angular.module("app.components").controller("SearchController",t),t.$inject=["$scope","search","SearchResult","$location","animation","SearchResultLocation"]}(),function(){"use strict";function t(){function t(t){console.log("sc",t)}function e(t){function e(t){return new Date(t).getTime()}function a(){return e(new Date)}function o(){return e(a()-6048e5)}console.log("vm l",t);var n="single",i=angular.element("#picker_from").pickadate({onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),r=i.pickadate("picker"),s=angular.element("#picker_to").pickadate({onClose:function(){angular.element(document.activeElement).blur()},container:"body",klass:{holder:"picker__holder picker_container"}}),l=s.pickadate("picker");r.get("value")&&l.set("min",r.get("select")),l.get("value")&&r.set("max",l.get("select")),r.on("set",function(t){if(t.select){if(l.get("value")&&"single"===n){var e=[mainSensorID,compareSensorID];e=e.filter(function(t){return t}),changeChart(e,{from:r.get("value"),to:l.get("value")})}l.set("min",r.get("select"))}else"clear"in t&&l.set("min",!1)}),l.on("set",function(t){if(t.select){if(r.get("value")){var e=[mainSensorID,compareSensorID];e=e.filter(function(t){return t}),changeChart(e,{from:r.get("value"),to:l.get("value")})}r.set("max",l.get("select"))}else"clear"in t&&r.set("max",!1)}),l.set("max",new Date),r.set("select",o()),l.set("select",a());var c={getValuePickerFrom:function(){return r.get("value")},setValuePickerFrom:function(t){n="single",r.set("select",t)},getValuePickerTo:function(){return l.get("value")},setValuePickerTo:function(t){n="single",l.set("select",t)},setValuePickers:function(t){var e=t[0],a=t[1];n="pair",r.set("select",e),l.set("select",a)}};_.extend($scope,c)}return t.$inject=["$scope"],{restrict:"A",link:e,controller:t,controllerAs:"vm"}}angular.module("app.components").directive("picker",t),t.$inject=[]}(),function(){"use strict";function t(t,e,a,o,n,i,r){function s(){a(function(){o.viewLoaded()},500),l()}function l(){r.getResetPassword(e.code).then(function(){d.showForm=!0})["catch"](function(){i.error("Wrong url"),n.path("/")})}function c(t){return d.waitingFromServer=!0,d.errors=void 0,t.newPassword!==t.confirmPassword?void(d.isDifferent=!0):(d.isDifferent=!1,void r.patchResetPassword(e.code,{password:t.newPassword}).then(function(){i.success("Your data was updated successfully"),n.path("/profile")})["catch"](function(t){i.error("Your data wasn't updated"),d.errors=t.data.errors})["finally"](function(){d.waitingFromServer=!1}))}var d=this;d.showForm=!1,d.form={},d.isDifferent=!1,d.answer=c,s()}angular.module("app.components").controller("PasswordResetController",t),t.$inject=["$mdDialog","$stateParams","$timeout","animation","$location","alert","auth"]}(),function(){"use strict";function t(t,e,a){function o(){n.waitingFromServer=!0,n.errors=void 0;var o={username:n.username};t.recoverPassword(o).then(function(){e.success("You were sent an email to recover your password"),a.hide()})["catch"](function(t){n.errors=t.data.errors,n.errors&&e.error("That email/username doesn't exist")})["finally"](function(){n.waitingFromServer=!1})}var n=this;n.waitingFromServer=!1,n.errors=void 0,n.recoverPassword=o}angular.module("app.components").controller("PasswordRecoveryController",t),t.$inject=["auth","alert","$mdDialog"]}(),function(){"use strict";function t(t,e,a,o,n,i,r,s,l,c,d,u,m,p,f,g,h,v,y,b,w,k,S){function T(){var t=_.pluck(M.user.kits,"id");t.length?a.all(t.map(function(t){return y.getDevice(t).then(function(t){return new v(t)})})).then(function(t){t&&(M.kits=t,u(function(){$(M.kits),C(M.status),L(),f.viewLoaded()},500))}):M.kits=[]}function C(t){"all"===t&&(t=void 0),M.kitStatus=t,M.filteredKits=k("filterLabel")(M.kits,M.kitStatus)}function P(t){"all"===t&&(t=void 0),M.toolType=t}function A(t){t.country&&_.each(d,function(e,a){return e===t.country?void(t.country_code=a):void 0}),r.updateUser(t).then(function(t){var e=new i(t);_.extend(M.user,e),M.errors={},c.success("User updated"),ga("send","event","Profile","update")})["catch"](function(t){c.error("User could not be updated "),M.errors=t.data.errors,ga("send","event","Profile","update failed")})}function I(){var t=h.alert().title("Delete your account?").content("If you wish to remove you account completely, please contact our support team at support@smartcitizen.me").ariaLabel("").ok("OK!").theme("primary").clickOutsideToClose(!0);h.show(t)}function O(t,e){var a=e||S.current.name||"layout.myProfile.kits";x(t),S.transitionTo(a)}function x(t){var e=angular.element(".myProfile_tab_icon");_.each(e,function(t){D(t)});var a=e[t];angular.element(a).find(".stroke_container").css({stroke:"white","stroke-width":"0.01px"}),angular.element(a).find(".fill_container").css("fill","white")}function D(t){t=angular.element(t),t.find(".stroke_container").css({stroke:"none"}),t.find(".fill_container").css("fill","#82A7B0")}function L(){var t=document.body.clientHeight/4*3;angular.element(".profile_content").css("min-height",t+"px")}function E(t){return _.filter(d,R(t))}function R(t){return t=t.toLowerCase(),function(e){return e=e.toLowerCase(),-1!==e.indexOf(t)}}function N(t){t&&t.length&&m.getCredentials(t[0].name).then(function(e){m.uploadFile(t[0],e.key,e.policy,e.signature).success(function(){M.user.avatar=m.getImageURL(e.key)})})}function U(t,e){var a={username:!0,email:!0,city:!0,country:!0,country_code:!0,website:!0,constructor:!1};for(var o in e)a[o]&&(t[o]=e[o])}function $(t){_.map(t,z)}function z(t){return t.belongProperty=F(t),t}function F(t){if(!s.isAuth()||!t||!t.id)return!1;var e=parseInt(t.id),a=s.getCurrentUser().data||$window.localStorage.getItem("smartcitizen.data")&&new i(JSON.parse($window.localStorage.getItem("smartcitizen.data"))),o=b.belongsToUser(a.kits,e),n=w.isAdmin(a);return n||o}var M=this;M.selectThisTab=O,M.startingTab="layout.myProfile.user"===S.current.name?1:"layout.myProfile.tools"===S.current.name?2:0,M.unhighlightIcon=D,M.formUser={},M.getCountries=E,M.user=n,U(M.formUser,M.user),M.searchText=M.formUser.country,M.updateUser=A,M.removeUser=I,M.uploadAvatar=N,M.kits=[],M.kitStatus=void 0,M.filteredKits=[],M.dropdownSelected=void 0,M.dropdownOptions=g,M.tools=p,M.toolType=void 0,M.filteredTools=[],M.filterKits=C,M.filterTools=P;t.$on("loggedOut",function(){e.path("/")}),T()}angular.module("app.components").controller("MyProfileController",t),t.$inject=["$scope","$location","$q","$interval","userData","AuthUser","user","auth","utils","alert","COUNTRY_CODES","$timeout","file","PROFILE_TOOLS","animation","DROPDOWN_OPTIONS_KIT","$mdDialog","PreviewKit","device","kitUtils","userUtils","$filter","$state"]}(),function(){"use strict";function t(t,e,a,o,n,i,r,s,l,c){function d(){I.markers=o.getWorldMarkers(),I.initialMarkers=I.markers,o.getAllDevices().then(function(t){I.markers&&0!==I.markers.length||(I.markers=_.chain(t).map(function(t){return new c(t)}).filter(function(t){return!!t.lng&&!!t.lat}).tap(function(t){o.setWorldMarkers(t)}).value());var a=_.indexBy(I.markers,function(t){return t.myData.id});e.params.id&&a[parseInt(e.params.id)]?A=a[parseInt(e.params.id)].myData.id:e.params.id&&l.error("This kit cannot be located in the map because its location has not been set up.")}),u()}function u(){var t=_.every(I.filterData,function(t){return t});I.allFiltersSelected=t}function m(){n.show({hasBackdrop:!0,controller:"MapFilterDialogController",templateUrl:"app/components/map/mapFilterPopup.html",clickOutsideToClose:!0,locals:{filterData:I.filterData,defaultFiltersFromController:R}}).then(function(t){_.extend(I.filterData,t.data),_.extend(R,t.defaultFilters),g(t.data),u(),a(function(){h()})})}function p(t){r.canFilterBeRemoved(I.filterData,t)&&(I.filterData[t]=!1,_.extend(R,r.setDefaultFilters(I.filterData,R)),g(I.filterData),u(),a(function(){h()}))}function f(t){return I.markers.filter(function(e){var a=e.myData.labels;return _.every(a,function(e){return t[e]})})}function g(e){a(function(){t.$apply(function(){I.markers=I.initialMarkers,I.markers=f(e)})})}function h(){return i.getMarkers().then(function(t){return i.getLayers().then(function(e){var a=v(e,t);a||i.getMap().then(function(){var a=L.latLng(I.center.lat,I.center.lng),o=_.reduce(t,function(t,e){var o=a.distanceTo(e.getLatLng()),n=a.distanceTo(t.getLatLng());return n>o?e:t},t[0]);o?b(e,o):l.error("No markers found with those filters",5e3)})})})}function v(t,e){var a=t.overlays.realworld._currentShownBounds;return _.some(e,function(t){return y(a,t)})}function y(t,e){return t.contains(e.getLatLng())}function b(t,e){var o=t.overlays.realworld._currentShownBounds;y(o,e)||(w(),i.getLayers().then(function(t){a(function(){b(t,e)})}))}function w(){0!==I.center.zoom&&(I.center.zoom=I.center.zoom-3)}function k(t){var e=[{name:"venue",zoom:18},{name:"address",zoom:18},{name:"neighbourhood",zoom:13},{name:"locality",zoom:13},{name:"localadmin",zoom:10},{name:"county",zoom:10},{name:"region",zoom:8},{name:"country",zoom:7},{name:"coarse",zoom:7}];return t.layer?_.find(e,function(e){return e.name===t.layer}).zoom:5}function S(){x&&!O&&D&&(ga("send","event","Map","moved"),O=!0)}function T(){return(window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>=2)&&/(iPad|iPhone|iPod|Apple)/g.test(navigator.userAgent)}function C(t,e){I.center.lat=e.lat,I.center.lng=e.lng,I.center.zoom=k(e)}var P,A,I=this,O=!1,x=!1,D=!1;I.markers=[],I.initialMarkers=[];var E=T()?"@2x":"";I.tiles={url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}"+E+".png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"},I.layers={baselayers:{osm:{name:"OpenStreetMap",type:"xyz",url:"https://api.tiles.mapbox.com/v4/mapbox.streets-basic/{z}/{x}/{y}"+E+".png?access_token=pk.eyJ1IjoidG9tYXNkaWV6IiwiYSI6ImRTd01HSGsifQ.loQdtLNQ8GJkJl2LUzzxVg"}},overlays:{realworld:{name:"Devices",type:"markercluster",visible:!0,layerOptions:{showCoverageOnHover:!1}}}},I.center={lat:13.14950321154457,lng:-1.58203125,zoom:2},I.defaults={dragging:!0,touchZoom:!0,scrollWheelZoom:!0,doubleClickZoom:!0,minZoom:2},I.events={map:{enable:["dragend","zoomend","moveend","popupopen","popupclose","mousedown","dblclick","click","touchstart","mouseup"],logic:"broadcast"}},t.$on("leafletDirectiveMarker.click",function(t,o){var n=o.leafletEvent.target.options.myData.id;if(I.kitLoading=!0,I.center.lat=o.leafletEvent.latlng.lat,I.center.lng=o.leafletEvent.latlng.lng,n===parseInt(e.params.id))return void a(function(){I.kitLoading=!1},0);A=o.leafletEvent.target.options.myData.id,P="map";var n=o.leafletEvent.target.options.myData.id,i=o.leafletEvent.target.options.myData.labels[0];ga("send","event","Kit Marker","click",i),e.go("layout.home.kit",{id:n})}),t.$on("leafletDirectiveMarker.popupclose",function(){if(A){var t=I.markers[A];t&&(I.markers[A].focus=!1)}}),t.$on("kitLoaded",function(e,o){return I.kitLoading=!1,"map"===P?void(P=void 0):(C(null,o),void a(function(){i.getMarkers().then(function(e){var a=_.find(e,function(t){return o.id===t.options.myData.id});i.getLayers().then(function(e){a&&e.overlays.realworld.zoomToShowLayer(a,function(){var e=a;e&&(e.focus=!0),t.$$phase||t.$digest(),x=!0})})})},3e3))}),t.$on("goToLocation",function(t,e){C(t,e)}),t.$on("leafletDirectiveMap.moveend",function(){S()}),t.$on("leafletDirectiveMap.zoomend",function(){S()}),t.$on("leafletDirectiveMap.mousedown",function(){D=!0});var R={exposure:null,status:null};I.filterData={indoor:!0,outdoor:!0,online:!0,offline:!0},I.openFilterPopup=m,I.removeFilter=p,d()}angular.module("app.components").controller("MapController",t),t.$inject=["$scope","$state","$timeout","device","$mdDialog","leafletData","mapUtils","markerUtils","alert","Marker"]}(),function(){"use strict";function t(){return{scope:{show:"="},restrict:"A",controller:"LoginController",controllerAs:"vm",templateUrl:"app/components/login/login.html"}}angular.module("app.components").directive("login",t)}(),function(){"use strict";function t(t,e){function a(){e.show({hasBackdrop:!0,controller:"LoginDialogController",templateUrl:"app/components/login/loginModal.html",clickOutsideToClose:!0})}t.showLogin=a,t.$on("showLogin",function(){a()})}angular.module("app.components").controller("LoginController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(t,e,a,o,n,i,r,s){function l(){i(function(){var e=t.search();e.signup?n.showSignup():e.login?n.showLogin():e.passwordRecovery?n.showPasswordRecovery():setTimeout(function(){d.isLoggedin||a.$broadcast("showBeta")},500)},1e3)}function c(){o.logout(),d.isLoggedin=!1}var d=this;d.navRightLayout="space-around center",a.$on("loggedIn",function(){d.isLoggedin=!0,d.isShown=!0,angular.element(".nav_right .wrap-dd-menu").css("display","initial"),d.currentUser=o.getCurrentUser().data,d.dropdownOptions[0].text="Hello, "+d.currentUser.username,d.navRightLayout="end center",a.$$phase||a.$digest()}),a.$on("loggedOut",function(){d.isLoggedIn=!1,d.isShown=!0,angular.element("navbar .wrap-dd-menu").css("display","none"),d.navRightLayout="space-around center",ga("send","event","Logout","click")}),d.isShown=!0,d.isLoggedin=!1,d.logout=c,d.dropdownOptions=s,d.dropdownSelected=void 0,d.dropdownOptionsCommunity=r,d.dropdownSelectedCommunity=void 0,a.$on("removeNav",function(){d.isShown=!1}),a.$on("addNav",function(){d.isShown=!0}),l()}angular.module("app.components").controller("LayoutController",t),t.$inject=["$location","$state","$scope","auth","animation","$timeout","DROPDOWN_OPTIONS_COMMUNITY","DROPDOWN_OPTIONS_USER"]}(),function(){"use strict";function t(){return{restrict:"E",scope:{kits:"=kits"},controller:"KitListController",controllerAs:"vm",templateUrl:"app/components/kitList/kitList.html"}}angular.module("app.components").directive("kitList",t)}(),function(){"use strict";function t(){}angular.module("app.components").controller("KitListController",t),t.$inject=["$window","auth","AuthUser","kitUtils","userUtils"]}(),function(){"use strict";function t(){}angular.module("app.components").controller("HomeController",t)}(),function(){"use strict";function t(t,e,a){function o(){e.mailReadings(n.kit).then(function(){a.hide()})["catch"](function(t){a.cancel(t)})}var n=this;n.kit=t,n.download=o}angular.module("app.components").controller("DownloadDialogController",t),t.$inject=["thisKit","device","$mdDialog"]}(),function(){"use strict";function t(t,e){t.hide=function(){e.hide()}}angular.module("app.components").controller("StoreDialogController",t),t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function t(t,e,a,o,n){t.answer=function(n){return t.form.$valid?(t.waitingFromServer=!0,void a.createUser(n).then(function(){o.success("Signup was successful"),e.hide(),ga("send","event","Signup","signed up")})["catch"](function(e){o.error("Signup failed"),t.errors=e.data.errors,ga("send","event","Signup","failed")})["finally"](function(){t.waitingFromServer=!1})):void(t.errors={conditions:["You have to accept our Terms and Conditions first"]})},t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.openLogin=function(){n.showLogin(),e.hide()}}angular.module("app.components").controller("SignupDialogController",t),t.$inject=["$scope","$mdDialog","user","alert","animation","$location"]}(),function(){"use strict";function t(t,e,a,o,n,i){t.password={newPassword:void 0,confirmPassword:void 0},t.isDifferent=!1,t.answer=function(r){return r.newPassword!==r.confirmPassword?void(t.isDifferent=!0):(t.isDifferent=!1,void n.patchResetPassword(a.code,{password:r.newPassword}).then(function(){i.success("Your data was updated successfully"),o.path("/profile"),e.hide()})["catch"](function(){i.error("Your data wasn't updated")}))},t.cancel=function(){e.hide()},t.hide=function(){e.hide()}}angular.module("app.components").controller("PasswordResetDialogController",t),t.$inject=["$scope","$mdDialog","$stateParams","$location","auth","alert"]}(),function(){"use strict";function t(t,e,a,o,n){t.hide=function(){a.hide()},t.cancel=function(){a.cancel()},t.recoverPassword=function(){t.waitingFromServer=!0;var e={email_or_username:t.input};o.recoverPassword(e).then(function(){n.success("You were sent an email to recover your password"),a.hide()})["catch"](function(e){n.error("That username doesn't exist"),t.errors=e.data})["finally"](function(){t.waitingFromServer=!1})},t.openSignup=function(){e.showSignup(),a.hide()}}angular.module("app.components").controller("PasswordRecoveryDialogController",t),t.$inject=["$scope","animation","$mdDialog","auth","alert"]}(),function(){"use strict";function t(t,e,a,o,n){var i={exposure:null,status:null};t.form={indoor:!1,outdoor:!1,online:!1,offline:!1},_.extend(t.form,a),_.extend(i,o),t.answer=function(a){a||(a=_.each(t.form,function(t,e,a){a[e]=!0}));var o={data:a,defaultFilters:i};e.hide(o)},t.hide=function(){e.hide()},t.cancel=function(){e.hide()},t.applyFilterRules=function(){_.extend(t.form,n.getDefaultFilters(t.form,i)),_.extend(i,n.setDefaultFilters(t.form,i))}}angular.module("app.components").controller("MapFilterDialogController",t),t.$inject=["$scope","$mdDialog","filterData","defaultFiltersFromController","mapUtils"]}(),function(){"use strict";function t(t,e,a,o,n){t.answer=function(n){t.waitingFromServer=!0,a.login(n).then(function(t){var o=t.access_token;a.saveData(o),e.hide()})["catch"](function(){o.error("Username or password incorrect"),ga("send","event","Login","logged in")})["finally"](function(){t.waitingFromServer=!1,ga("send","event","Login","failed")})},t.hide=function(){e.hide()},t.cancel=function(){e.hide()},t.openSignup=function(){n.showSignup(),e.hide()},t.openPasswordRecovery=function(){e.show({hasBackdrop:!0,controller:"PasswordRecoveryDialogController",templateUrl:"app/components/passwordRecovery/passwordRecoveryModal.html",clickOutsideToClose:!0}),e.hide()}}angular.module("app.components").controller("LoginDialogController",t),t.$inject=["$scope","$mdDialog","auth","alert","animation"]}(),function(){"use strict";function t(t){return{template:'<div class="cookies-policy_container" ng-hide="consent()">This site uses cookies to offer you a better experience.   <a href="" ng-click="consent(true)">Accept</a> or <a ui-sref="layout.policy">Learn More.</a> </div>',controller:["$scope",function(e){var a=t.consent;e.consent=function(e){return void 0===e?a:void(e&&(t.consent=!0,a=!0))}}]}}angular.module("app.components").directive("cookiesLaw",t),t.$inject=["$cookies"]}(),function(){"use strict";function t(t,e,a,o){function n(t,n){a(function(){i(n[0])},0);var s={};angular.element(o).on("resize",function(){i(n[0]),r(s.data,{type:s.type,container:n[0],color:s.color,unit:s.unit})}),t.$watch("chartData",function(t){if(t&&void 0!==t){if(t[0]&&t[1]){var a=t[0].data,o=a.map(function(t){return{date:T(t.time),count:t&&t.count,value:t&&t.value}});o.sort(function(t,e){return t.date-e.date});var i=t[1].data,l=i.map(function(t){return{date:T(t.time),count:t&&t.count,value:t&&t.value}});l.sort(function(t,e){return t.date-e.date});var c=[o,l],d=[t[0].color,t[1].color],u=[t[0].unit,t[1].unit];s={data:c,type:"both",color:d,unit:u},r(c,{type:"both",container:n[0],color:d,unit:u})}else if(t[0]){var m=t[0].data,c=m.map(function(t){return{date:T(t.time),count:t&&t.count,value:t&&t.value}});c.sort(function(t,e){return t.date-e.date});var p=t[0].color,f=t[0].unit;s={data:c,type:"main",color:p,unit:f},r(c,{type:"main",container:n[0],color:p,unit:f})}e.hideChartSpinner()}})}function i(t){d3.select(t).selectAll("*").remove(),f={top:20,right:12,bottom:20,left:40},g=t.clientWidth-f.left-f.right,h=t.clientHeight-f.top-f.bottom,y=d3.time.scale.utc().range([0,g]),y.tickFormat("%Y-%m-%d %I:%M:%S"),b=d3.scale.linear().range([h,0]),w=d3.scale.linear().range([h,0]),L=d3.scale.linear().range([h,0]),T=d3.time.format.utc("%Y-%m-%dT%H:%M:%SZ").parse,_=d3.svg.axis().scale(y).orient("bottom").ticks(5),k=d3.svg.axis().scale(b).orient("left").ticks(5),S=d3.svg.axis().scale(w).orient("right").ticks(5),C=d3.svg.area().interpolate("linear").x(function(t){return y(t.date)}).y0(h).y1(function(t){return b(t.count)}),P=d3.svg.line().interpolate("linear").x(function(t){return y(t.date)}).y(function(t){return b(t.count)}),A=d3.svg.area().interpolate("linear").x(function(t){return y(t.date)}).y0(h).y1(function(t){return w(t.count)}),I=d3.svg.line().interpolate("linear").x(function(t){return y(t.date)}).y(function(t){return w(t.count)}),v=d3.select(t).append("svg").attr("width",g+f.left+f.right).attr("height",h+f.top+f.bottom).append("g").attr("transform","translate("+(f.left-f.right)+","+f.top+")")}function r(t,e){"main"===e.type?s(t,e):"both"===e.type&&l(t,e)}function s(t,e){function a(){var a=d3.bisector(function(t){return t.date}).left,o=y.invert(d3.mouse(this)[0]),n=a(t,o,1),i=t[n-1],r=t[n],s=o-i.date>r.date-o?r:i;x.attr("transform","translate("+y(s.date)+", "+b(s.count)+")");var l=D.select("text"),c=l.select(".popup_main"),d=(c.select(".popup_value").text(u(s.value)),c.select(".popup_unit").text(e.unit),l.select(".popup_date").text(m(s.date))),f=[c,d],g=p(E,f);y(s.date)+80+g>e.container.clientWidth?D.attr("transform","translate("+(y(s.date)-120)+", "+(d3.mouse(this)[1]-20)+")"):D.attr("transform","translate("+(y(s.date)+80)+", "+(d3.mouse(this)[1]-20)+")")}y.domain(d3.extent(t,function(t){return t.date})),b.domain([.8*d3.min(t,function(t){return t.count}),1.2*d3.max(t,function(t){return t.count})]),v.selectAll("*").remove(),v.append("path").datum(t).attr("class","chart_area").attr("fill",e.color).attr("d",C),v.append("path").attr("class","chart_line").attr("stroke",e.color).attr("d",P(t)),v.append("g").attr("class","axis x").attr("transform","translate(0,"+h+")").call(_),v.append("g").attr("class","axis y_left").style("fill",e.color).call(k),v.append("g").attr("class","grid").attr("transform","translate(0,"+h+")").call(c().tickSize(-h,0,0).tickFormat("")),v.append("g").attr("class","grid").call(d().tickSize(-g,0,0).tickFormat("")),x=v.append("g").attr("class","focus").style("display","none"),x.append("circle").style("stroke",e.color).attr("r",4.5);var o=84,n=46;D=v.append("g").attr("class","focus").style("display","none"),E=D.append("rect").attr("width",o).attr("height",n).attr("transform",function(){var t="translate(-42, 5)";return t}).style("stroke","grey").style("stroke-width","0.5").style("fill","white");var i=D.append("text").attr("class",""),r=i.append("tspan").attr("class","popup_main").attr("text-anchor","start").attr("x",-o/2).attr("dx",8).attr("y",n/2).attr("dy",3);r.append("tspan").attr("class","popup_value"),r.append("tspan").attr("class","popup_unit").attr("dx",5),i.append("tspan").attr("class","popup_date").attr("x",-o/2).attr("dx",8).attr("y",n-2).attr("dy",0).attr("text-anchor","start"),v.append("rect").attr("class","overlay").attr("width",g).attr("height",h).on("mouseover",function(){D.style("display",null),x.style("display",null)}).on("mouseout",function(){D.style("display","none"),x.style("display","none")}).on("mousemove",a)}function l(t,e){function a(){var a=d3.bisector(function(t){return t.date}).left,o=y.invert(d3.mouse(this)[0]),n=a(t[1],o,1),i=t[1][n-1],r=t[1][n],s=o-i.date>r.date-o?r:i;O.attr("transform","translate("+y(s.date)+", "+w(s.count)+")");var l=t[0][n-1],c=t[0][n],d=o-l.date>c.date-o?c:l;x.attr("transform","translate("+y(d.date)+", "+b(d.count)+")");var f=D.select("text"),g=f.select(".popup_main");g.select(".popup_value").text(u(d.value)),g.select(".popup_unit").text(e.unit[0]);var h=f.select(".popup_compare");h.select(".popup_value").text(u(s.value)),h.select(".popup_unit").text(e.unit[1]);var v=f.select(".popup_date").text(m(s.date)),_=[g,h,v],k=p(E,_);y(s.date)+80+k>e.container.clientWidth?D.attr("transform","translate("+(y(s.date)-120)+", "+(d3.mouse(this)[1]-20)+")"):D.attr("transform","translate("+(y(s.date)+80)+", "+(d3.mouse(this)[1]-20)+")")}y.domain(d3.extent(t[0],function(t){return t.date})),b.domain([.8*d3.min(t[0],function(t){return t.count}),1.2*d3.max(t[0],function(t){return t.count})]),w.domain([.8*d3.min(t[1],function(t){return t.count}),1.2*d3.max(t[1],function(t){return t.count})]),v.selectAll("*").remove(),v.append("path").datum(t[0]).attr("class","chart_area").attr("fill",e.color[0]).attr("d",C),v.append("path").datum(t[1]).attr("class","chart_area").attr("fill",e.color[1]).attr("d",A),v.append("path").attr("class","chart_line").attr("stroke",e.color[0]).attr("d",P(t[0])),v.append("path").attr("class","chart_line").attr("stroke",e.color[1]).attr("d",I(t[1])),v.append("g").attr("class","axis x").attr("transform","translate(0,"+h+")").call(_),v.append("g").attr("class","axis y_left").style("fill",e.color[0]).call(k),v.append("g").attr("class","axis y_right").style("fill",e.color[1]).attr("transform","translate("+g+" ,0)").call(S),v.append("g").attr("class","grid").attr("transform","translate(0,"+h+")").call(c().tickSize(-h,0,0).tickFormat("")),v.append("g").attr("class","grid").call(d().tickSize(-g,0,0).tickFormat("")),O=v.append("g").attr("class","focus").style("display","none"),x=v.append("g").attr("class","focus").style("display","none"),O.append("circle").style("stroke",e.color[1]).attr("r",4.5),x.append("circle").style("stroke",e.color[0]).attr("r",4.5);var o=84,n=75;D=v.append("g").attr("class","focus").style("display","none"),E=D.append("rect").attr("width",o).attr("height",n).style("min-width","40px").attr("transform",function(){var t="translate(-42, 5)";return t}).style("stroke","grey").style("stroke-width","0.5").style("fill","white"),D.append("rect").attr("width",8).attr("height",2).attr("transform",function(){return"translate("+(-o/2+4).toString()+", 20)"}).style("fill",e.color[0]),D.append("rect").attr("width",8).attr("height",2).attr("transform",function(){return"translate("+(-o/2+4).toString()+", 45)"}).style("fill",e.color[1]);var i=D.append("text").attr("class",""),r=i.append("tspan").attr("class","popup_main").attr("x",-n/2+7).attr("dx",8).attr("y",n/3).attr("dy",3);r.append("tspan").attr("class","popup_value").attr("text-anchor","start"),r.append("tspan").attr("class","popup_unit").attr("dx",5);var s=i.append("tspan").attr("class","popup_compare").attr("x",-n/2+7).attr("dx",8).attr("y",n/1.5).attr("dy",3);s.append("tspan").attr("class","popup_value").attr("text-anchor","start"),s.append("tspan").attr("class","popup_unit").attr("dx",5),i.append("tspan").attr("class","popup_date").attr("x",-o/2).attr("dx",8).attr("y",n-2).attr("dy",0).attr("text-anchor","start"),v.append("rect").attr("class","overlay").attr("width",g).attr("height",h).on("mouseover",function(){O.style("display",null),x.style("display",null),D.style("display",null)}).on("mouseout",function(){O.style("display","none"),x.style("display","none"),D.style("display","none")}).on("mousemove",a)}function c(){return d3.svg.axis().scale(y).orient("bottom").ticks(5)}function d(){return d3.svg.axis().scale(b).orient("left").ticks(5)}function u(t){if(null===t)return"No data on the current timespan";if(-1!==t.toString().indexOf(".")){var e=t.toString().split(".");return e[0]+"."+e[1].slice(0,2)}return t.toString().slice(0,2)}function m(t){return moment(t).format("h:mm a ddd Do MMM YYYY")}function p(t,e){function a(t){var e,a=t.node();return e=a.getComputedTextLength?a.getComputedTextLength():a.getBoundingClientRect?a.getBoundingClientRect().width:a.getBBox().width}if(e.length){var o=e.reduce(function(t,e){var o=a(e),n=a(t);return n>=o?t:e},e[0]),n=2*o.attr("dx");return t.attr("width",a(o)+n),a(o)+n}}var f,g,h,v,y,b,w,_,k,S,T,C,P,A,I,O,x,D,L,E;return{link:n,restrict:"A",scope:{chartData:"="}}}angular.module("app.components").directive("chart",t),t.$inject=["sensor","animation","$timeout","$window"]}(),function(){"use strict";function t(){return{scope:{show:"="},restrict:"A",controller:"BetaController",controllerAs:"vm",templateUrl:"app/components/beta/beta.html"}}angular.module("app.components").directive("beta",t)}(),function(){"use strict";function t(t,e,a){function o(){if("other"!=i())return void n();var t=a.localStorage.getItem("smartcitizen.beta_popup");(!t||moment().diff(moment(t),"days")>=7)&&(e.show({hasBackdrop:!0,controller:"StoreDialogController",templateUrl:"app/components/beta/betaModal.html",clickOutsideToClose:!0}),a.localStorage.setItem("smartcitizen.beta_popup",moment().format()))}function n(){e.show({hasBackdrop:!0,controller:"StoreDialogController",templateUrl:"app/components/beta/mobileModal.html",clickOutsideToClose:!0})}function i(){return/android/i.test(navigator.userAgent)?"android":/iPhone/i.test(navigator.userAgent)||/iPod/i.test(navigator.userAgent)?"ios":"other"}t.showBeta=o,t.$on("showBeta",function(){o()})}angular.module("app.components").controller("BetaController",t),t.$inject=["$scope","$mdDialog","$window"]}(),function(){"use strict";function t(){return{scope:{apiKey:"=apiKey"},restrict:"A",controller:"ApiKeyController",controllerAs:"vm",templateUrl:"app/components/apiKey/apiKey.html"}}angular.module("app.components").directive("apiKey",t)}(),function(){"use strict";function t(t){function e(){t.success("API key copied to your clipboard.")}function a(e){console.log("Copy error: ",e),t.error("Oops! An error occurred copying the api key.")}var o=this;o.copied=e,o.copyFail=a}angular.module("app.components").controller("ApiKeyController",t),t.$inject=["alert"]}(),function(){"use strict";function t(t){function e(t){s("success",t)}function a(t){s("error",t)}function o(){r("Woah! This kit still hasn't published any data. Leave a comment to let its owner know.",1e4,{button:"Leave comment",buttonAttributes:'analytics-on="click" analytics-event="click" analytics-category="Offline Kit Comment Link"',href:"#disqus_thread"})}function n(t){r("Woah! This kit still hasn't published any data. Please check its settings or contact the support team.",1e4,{button:"Kit settings",href:"/kits/edit/"+t})}function i(){r("ðŸ˜… It looks like this kit hasn't posted any data in a long time. Why not leave a comment to let its owner know?",1e4,{button:"Leave comment"})}function r(t,e,a){a.button?s("infoButton",t,a,void 0,e):s("info",t,a,void 0,e)}function s(e,a,o,n,i){n=void 0===n?"top":n,i=void 0===i?5e3:i,t.show({controller:"AlertController",controllerAs:"vm",templateUrl:"app/components/alert/alert"+e+".html",hideDelay:i,position:n,locals:{message:a,button:o&&o.button,buttonAttributes:o&&o.buttonAttributes,href:o&&o.href}})}var l={success:e,error:a,info:{noData:{visitor:o,owner:n},longTime:i,generic:r}};return l}angular.module("app.components").factory("alert",t),t.$inject=["$mdToast"]}(),function(){"use strict";function t(t,e,a,o,n){function i(){e.hide()}var r=this;r.close=i,r.message=a,r.button=o,r.href=n,t.$on("hideAlert",function(){i()})}angular.module("app.components").controller("AlertController",t),t.$inject=["$scope","$mdToast","message","button","href"]}(),angular.module("app",["ngFileUpload","ngMaterial","ui.router","restangular","angularSpinner","ngDropdowns","oauth","leaflet-directive","app.components","angularLoad","angulartics","angulartics.google.analytics","ngSanitize","angular-clipboard","ngCookies"]),function(){"use strict";function t(t,e,a,o,n){t.state("landing",{url:"/",controller:["$state",function(t){t.go("layout.home.kit")}]}).state("layout",{url:"","abstract":!0,templateUrl:"app/components/layout/layout.html",controller:"LayoutController",controllerAs:"vm"}).state("layout.styleguide",{url:"/styleguide",templateUrl:"app/components/static/styleguide.html",controller:"StaticController",controllerAs:"vm"}).state("layout.policy",{url:"/policy",templateUrl:"app/components/static/policy.html",controller:"StaticController",controllerAs:"vm"}).state("layout.about",{url:"/about",templateUrl:"app/components/static/about.html",controller:"StaticController",controllerAs:"vm"}).state("layout.kitEdit",{url:"/kits/edit/:id?step",templateUrl:"app/components/kit/editKit/editKit.html",controller:"EditKitController",controllerAs:"vm",resolve:{belongsToUser:["auth","$location","$stateParams","userUtils","kitUtils","$window","AuthUser",function(t,e,a,o,n,i,r){if(!t.isAuth())return void e.path("/");var s=parseInt(a.id),l=t.getCurrentUser().data||i.localStorage.getItem("smartcitizen.data")&&new r(JSON.parse(i.localStorage.getItem("smartcitizen.data"))),c=n.belongsToUser(l.kits,s),d=o.isAdmin(l);d||c||(console.error("This kit does not belong to user"),e.path("/"))}],step:["$stateParams",function(t){return parseInt(t.step)||1}]}}).state("layout.kitAdd",{url:"/kits/new",templateUrl:"app/components/kit/newKit/newKit.html",controller:"NewKitController",controllerAs:"vm"}).state("layout.home",{url:"/kits","abstract":!0,views:{"":{templateUrl:"app/components/home/template.html"},"map@layout.home":{templateUrl:"app/components/map/map.html",controller:"MapController",controllerAs:"vm"}},resolve:{sensorTypes:["sensor",function(t){return t.callAPI().then(function(t){return t.plain()})}]}}).state("layout.home.kit",{url:"/:id",views:{"container@layout.home":{templateUrl:"app/components/kit/showKit/showKit.html",controller:"KitController",controllerAs:"vm"}},resolve:{belongsToUser:["$window","$stateParams","auth","AuthUser","kitUtils","userUtils",function(t,e,a,o,n,i){if(!a.isAuth()||!e.id)return!1;var r=parseInt(e.id),s=a.getCurrentUser().data||t.localStorage.getItem("smartcitizen.data")&&new o(JSON.parse(t.localStorage.getItem("smartcitizen.data"))),l=n.belongsToUser(s.kits,r),c=i.isAdmin(s);return c||l}]}}).state("layout.userProfile",{url:"/users/:id",templateUrl:"app/components/userProfile/userProfile.html",controller:"UserProfileController",controllerAs:"vm",resolve:{isCurrentUser:["$stateParams","$location","auth",function(t,e,a){if(a.isAuth()){var o=parseInt(t.id),n=a.getCurrentUser().data&&a.getCurrentUser().data.id;o===n&&e.path("/profile")}}],isAdmin:["$window","$location","$stateParams","auth","AuthUser",function(t,e,a,o,n){var i=o.getCurrentUser().data&&o.getCurrentUser().data.role||t.localStorage.getItem("smartcitizen.data")&&new n(JSON.parse(t.localStorage.getItem("smartcitizen.data"))).role;if("admin"!==i)return!1;var r=a.id;e.path("/profile/"+r)}]}}).state("layout.myProfile",{url:"/profile",authenticate:!0,templateUrl:"app/components/myProfile/myProfile.html",controller:"MyProfileController",controllerAs:"vm",resolve:{userData:["$location","$window","user","auth","AuthUser",function(t,e,a,o,n){var i=o.getCurrentUser().data||e.localStorage.getItem("smartcitizen.data")&&new n(JSON.parse(e.localStorage.getItem("smartcitizen.data")));if(i)return i}]}}).state("layout.myProfile.kits",{url:"/kits",authenticate:!0,templateUrl:"app/components/myProfile/Kits.html",controllerAs:"vm"}).state("layout.myProfile.user",{url:"/users",authenticate:!0,templateUrl:"app/components/myProfile/Users.html",controllerAs:"vm"}).state("layout.myProfile.tools",{url:"/tools",authenticate:!0,templateUrl:"app/components/myProfile/Tools.html",controllerAs:"vm"}).state("layout.myProfileAdmin",{url:"/profile/:id",authenticate:!0,templateUrl:"app/components/myProfile/myProfile.html",controller:"MyProfileController",controllerAs:"vm",resolve:{isAdmin:["$window","auth","$location","AuthUser",function(t,e,a,o){var n=e.getCurrentUser().data&&e.getCurrentUser().data.role||t.localStorage.getItem("smartcitizen.data")&&new o(JSON.parse(t.localStorage.getItem("smartcitizen.data"))).role;return"admin"===n?!0:void a.path("/")}],userData:["$stateParams","user","auth","AuthUser",function(t,e,a,o){var n=t.id;return e.getUser(n).then(function(t){return new o(t)})}]}}).state("layout.login",{url:"/login",authenticate:!1,resolve:{buttonToClick:["$location","auth",function(t,e){return e.isAuth()?t.path("/"):(t.path("/kits/667"),void t.search("login","true"))}]}}).state("layout.signup",{url:"/signup",authenticate:!1,resolve:{buttonToClick:["$location","auth",function(t,e){return e.isAuth()?t.path("/"):(t.path("/kits/667"),void t.search("signup","true"))}]}}).state("logout",{url:"/logout",authenticate:!0,resolve:{logout:["$location","$state","auth","$rootScope",function(t,e,a,o){a.logout(),t.path("/"),o.$broadcast("loggedOut")}]}}).state("passwordRecovery",{url:"/password_reset",authenticate:!1,templateUrl:"app/components/passwordRecovery/passwordRecovery.html",controller:"PasswordRecoveryController",controllerAs:"vm"}).state("passwordReset",{url:"/password_reset/:code",authenticate:!1,templateUrl:"app/components/passwordReset/passwordReset.html",controller:"PasswordResetController",controllerAs:"vm"}),e.otherwise("/"),a.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!"),o.setBaseUrl("https://new-api.smartcitizen.me/v0"),n.debugEnabled(!1)}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","RestangularProvider","$logProvider"]}(),function(){"use strict";function t(t,e,a,o,n,i,r){t.$on("$stateChangeStart",function(t,a,n,s){return"layout.home.kit"===a.name,"layout.home.kit"===a.name&&"layout.home.kit"!==s.name&&r.mapStateLoading(),a.authenticate===!1&&o.isAuth()?(t.preventDefault(),void e.go("landing")):(a.authenticate&&(o.isAuth()||(t.preventDefault(),e.go("landing"))),r.hideAlert(),void i.scrollTo(0,0))}),a.addFullRequestInterceptor(function(t,e,a,n,i,r,s){if(o.isAuth()){var l=o.getCurrentUser().token;i.Authorization="Bearer "+l}return{element:t,headers:i,params:r,httpConfig:s}})}angular.module("app").run(t),t.$inject=["$rootScope","$state","Restangular","auth","$templateCache","$window","animation"]}(),angular.module("app").run(["$templateCache",function(t){t.put("app/components/alert/alerterror.html",'<md-toast class="red"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Insert Drive Icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertinfo.html",'<md-toast class="yellow"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Alert icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertinfoButton.html",'<md-toast class="yellow" layout="row" layout-align="space-between center"><div><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Alert icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-href="{{vm.href}}" class="alert_button">{{ vm.button }}</md-button></div><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/alert/alertsuccess.html",'<md-toast class="green"><md-icon md-svg-src="./assets/images/alert_icon.svg" alt="Insert Drive Icon" class="alert_typeIcon"></md-icon><span flex="">{{ vm.message }}</span><md-button ng-click="vm.close()" aria-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg" alt="Insert Drive Icon" class="alert_closeIcon"></md-icon></md-button></md-toast>'),t.put("app/components/apiKey/apiKey.html",'<div class="api_key_number">{{ apiKey }}</div><md-button clipboard="" text="apiKey" class="api_key_refresh_button" aria-label="" on-copied="vm.copied()" on-error="vm.copyFail(err)"><md-icon class="" md-svg-src="./assets/images/paste_icon.svg"></md-icon></md-button>'),t.put("app/components/beta/beta.html",""),t.put("app/components/beta/betaModal.html",'<md-dialog><md-dialog-content class="modal modal_beta"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon" aria-label=""><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><div><div class="modal_content_container"><h2>SMART CITIZEN BETA</h2><div class="modal_message"><p class="header beta">Welcome SmartCitizen!</p><p class="subheader beta">This is the new SmartCitizen platform. Explore the new design and functionalities and tell us what you think using the feedback button. Check also the new <a href="http://new-apidocs.smartcitizen.me/" target="_blank">API</a> and <a href="https://play.google.com/store/apps/details?id=com.fablabbcn.smartcitizen&hl=en" target="_blank">Android app</a>.</p></div></div><div class="img_claim"><img ng-src="../../../../assets/images/beta_claim.jpg" alt=""></div></div></md-dialog-content></md-dialog>'),t.put("app/components/beta/mobileModal.html",'<md-dialog><md-dialog-content class="modal modal_mobile"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon" aria-label=""><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><div><div class="modal_content_container"><h2>SMART CITIZEN BETA</h2><div class="modal_message"><p class="header beta">Welcome SmartCitizen!</p><p class="subheader beta">This is the new SmartCitizen platform. Unfortunately, this website isn\'t supported by mobile devices. Check our new <a href="https://play.google.com/store/apps/details?id=com.fablabbcn.smartcitizen&hl=en" target="_blank">Android app</a>.</p></div></div><div class="img_claim"><img ng-src="../../../../assets/images/beta_claim.jpg" alt=""></div></div></md-dialog-content></md-dialog>'),t.put("app/components/disqus/disqus.html","<div id=\"disqus_thread\"></div><script type=\"text/javascript\">\n   /* * * CONFIGURATION VARIABLES * * */\n   var disqus_shortname = 'smartcitizen';\n   // var disqus_identifier = 'newid1';\n   // var disqus_url = 'http://example.com/unique-path-to-article-1/';\n   // var disqus_config = function () { \n   //   this.language = \"en\";\n   // };\n\n   \n   /* * * DON'T EDIT BELOW THIS LINE * * */\n   (function() {\n       var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;\n       dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';\n       (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);\n   })();\n</script><noscript>Please enable JavaScript to view the <a href=\"https://disqus.com/?ref_noscript\" rel=\"nofollow\">comments powered by Disqus.</a></noscript>"),t.put("app/components/download/downloadDialog.html",'<md-dialog><md-dialog-content class="modal modal_download"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon" aria-label=""><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="downloadDialog.hide()" class=""></md-icon></md-button><div class="modal_downloadBtn"><div class="modal_content_container"><h2>DOWNLOAD DATA</h2><div class="main_content" layout="row" layout-align="space-between center" layout-padding=""><p>We will process your sensor data and send you an email with a download link when it is ready</p></div><div><md-button class="call-to-action" ng-click="downloadDialog.download()">Download</md-button></div></div></div></md-dialog-content></md-dialog>'),t.put("app/components/footer/footer.html",'<md-icon md-svg-src="./assets/images/LogotipoSmartCitizen.svg" class="footer_icon"></md-icon>'),t.put("app/components/home/template.html",'<div layout="vertical" layout-fill=""><md-content><section class="content"><div ui-view="map" class="map_state"></div><div ui-view="container" class="kit"></div></section></md-content></div>'),t.put("app/components/kitList/kitList.html",'<div class="" ng-if="kits.length === 0"><small>No kits</small></div><div class="kitList_parent" layout="row" layout-align="start center" ng-repeat="kit in kits track by kit.id"><md-button ng-href="./kits/{{kit.id}}" class="kitList" ng-class="{kitList_primary: !kit.belongProperty, kitList_secondary: kit.belongProperty, kitList_borderBottom: $last}" layout="column"><div layout="column"><div class="kitList_container" layout="row" layout-align="start center"><div class=""><img class="kitList_avatar" ng-src="{{ kit.avatar || \'./assets/images/avatar.svg\' }}"></div><div class="kitList_content"><h4>{{ kit.name || \'No name\' }}</h4><p class="kitList_data"><md-icon class="icon_label" md-svg-src="./assets/images/location_icon_light.svg"></md-icon><span>{{ kit.location || \'No location\' }}</span><md-icon class="icon_label" md-svg-src="./assets/images/sensor_icon.svg"></md-icon><span>{{ kit.type || \'Unknown Kit\'}}</span></p></div><div class="kitList_right" layout="row" layout-align="end center"><div class="" ng-if="kit.belongProperty && (kit.state.name === \'never published\' || kit.state.name === \'not configured\')" layout="row" layout-align="center center"><span class="kitList_state kitList_state_{{ kit.state.className }} state">{{ kit.state.name }}</span></div></div></div><div class="kitList_tags" layout="row" layout-align="start center"><span class="label" ng-repeat="label in kit.labels">{{ label }}</span> <span class="tag" ng-repeat="tag in kit.userTags">{{ tag }}</span></div></div></md-button><div class="kitList_config" ng-if="kit.belongProperty" layout="row" layout-align="center center"><md-button class="kitList_dropdownButton" aria-label="" dropdown-menu="kit.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><img src="./assets/images/config_icon.svg"></md-button></div></div>'),t.put("app/components/layout/layout.html",'<div class="navbar_container"><div beta=""></div><md-toolbar layout="row" layout-align="end center" class="stickNav"><a ui-sref="layout.home.kit({ id: \'\'})" class="logo_link"><md-icon md-svg-src="./assets/images/LogotipoSmartCitizen.svg" alt="Insert Drive Icon" class="logo_icon"></md-icon></a><section layout="row" class="nav_left" layout-align="space-around center"><md-button ng-show="vm.isShown" ui-sref="layout.home.kit({ id: \'\'})" class="md-flat full_height map"><md-icon md-svg-src="./assets/images/map_icon.svg" class="nav_icon"></md-icon><span>Map</span></md-button><md-button ng-show="vm.isShown" href="" class="md-flat full_height community" aria-label="" dropdown-menu="vm.dropdownOptionsCommunity" dropdown-model="vm.dropdownSelectedCommunity" dropdown-item-label="text" layout="row" layout-align="center center"><md-icon md-svg-src="./assets/images/community_icon.svg" class="nav_icon"></md-icon><span>Community</span></md-button></section><search flex=""></search><section layout="row" class="nav_right" layout-align="{{vm.navRightLayout}}"><div ng-show="vm.isShown" store="" logged="vm.isLoggedin" class="md-flat full_height get"></div><div ng-show="vm.isShown && !vm.isLoggedin" login="" class="navbar_login_button md-display-1"></div><div ng-show="vm.isShown && !vm.isLoggedin" signup="" class="navbar_signup_button md-display-1"></div><md-button ng-show="vm.isShown && vm.isLoggedin" class="md-flat navbar_avatar_button" aria-label="" dropdown-menu="vm.dropdownOptions" dropdown-model="vm.dropdownSelected" dropdown-item-label="text"><img class="navbar_avatar_icon" ng-src="{{ vm.currentUser.avatar || \'./assets/images/avatar.svg\' }}"></md-button></section></md-toolbar></div><div ui-view=""></div><footer class="footer" ng-include="\'app/components/footer/footer.html\'" layout="row" layout-align="center center"></footer>'),t.put("app/components/login/login.html",'<md-button class="md-flat full_height" ng-click="showLogin($event)" angular-on="click" angular-event="Login" angular-action="click">Log In</md-button>'),t.put("app/components/login/loginModal.html",'<md-dialog><md-dialog-content class="modal modal_login"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon" aria-label=""><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><form name="login_form" novalidate="" ng-submit="answer(vm.user)"><div class="modal_content_container"><h2>LOG IN</h2><h3>People looking for a better city</h3><p>You\'re part of them? Feel free to join us!</p><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username</label> <input id="autofocus" type="text" name="username" ng-model="vm.user.username" focus-input="" ng-required="login_form.$submitted"></md-input-container><p class="errors" ng-show="login_form.$submitted || login_form.username.$touched"><span ng-show="login_form.username.$error.required">Username is required</span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Password</label> <input type="password" name="password" ng-model="vm.user.password" ng-required="login_form.$submitted"></md-input-container><p class="errors" ng-show="login_form.$submitted || login_form.password.$touched"><span ng-show="login_form.password.$error.required">Password is required</span></p></div></div><md-button class="md-flat md-primary main" type="submit">LOG IN</md-button></form></md-dialog-content><p class="message_below"><span><span class="message_below_question">New here?</span><md-button class="message_below_link" ng-click="openSignup()" angular-on="click" angular-event="Login" angular-action="signup">SIGN UP</md-button></span> <span><span class="message_below_question">Forgot your password?</span><md-button class="message_below_link" ng-click="openPasswordRecovery()" angular-on="click" angular-event="Login" angular-action="password recover">REQUEST</md-button></span></p></md-dialog>'),t.put("app/components/map/map.html",'<section class="map" change-map-height=""><leaflet center="vm.center" layers="vm.layers" markers="vm.markers" defaults="vm.defaults" event-broadcast="vm.events" width="100%" height="100%"></leaflet><div class="map_legend" layout="row" layout-align="start center" move-filters=""><md-button ng-click="vm.openFilterPopup()" class="map_filter_button" layout="row" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/filter_icon.svg"></md-icon></md-button><div class="chips"><div ng-repeat="(filterName, isFilterSelected) in vm.filterData" class="chip map_filter" ng-if="isFilterSelected && !vm.allFiltersSelected" layout="row" layout-align="center center"><span class="chip_name">{{ filterName }}</span> <button ng-click="vm.removeFilter(filterName)" class="chip_icon" arial-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg"></md-icon></button></div><div ng-if="vm.allFiltersSelected" class="map_filter" layout="row" layout-align="center center"><div class="chip map_filter"><span class="chip_name">ALL FILTERS</span></div></div></div></div><md-progress-linear ng-show="vm.kitLoading" class="md-hue-3 kit_spinner" md-mode="indeterminate"></md-progress-linear></section>'),t.put("app/components/map/mapFilterPopup.html",'<md-dialog><md-dialog-content class="modal modal_mapFilter"><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="cancel()" class=""></md-icon></md-button><div class="modal_content_container_filter"><h2>FILTERS</h2><p>You can apply some filters to get more accurate results on the map.</p><div class="input_filter"><h3>Location filter</h3><small>now showing <span ng-show="form.indoor">Indoor</span><span ng-show="form.indoor && form.outdoor">,</span><span ng-show="form.outdoor">Outdoor</span></small><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.indoor" aria-label=""></md-checkbox><span>Indoor</span></div><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.outdoor" aria-label=""></md-checkbox><span>Outdoor</span></div></div><md-divider></md-divider><div class="input_filter"><h3>Status filter</h3><small>now showing <span ng-show="form.online">Online</span><span ng-show="form.online && form.offline">,</span><span ng-show="form.offline">Offline</span></small><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.online" aria-label=""></md-checkbox><span>Online</span></div><div class="modal_mapFilter_input"><md-checkbox ng-change="applyFilterRules()" ng-model="form.offline" aria-label=""></md-checkbox><span>Offline</span></div></div><md-divider></md-divider></div><md-button class="md-flat button_clear" ng-click="answer()">CLEAR FILTERS</md-button><md-button class="md-flat md-primary main" ng-click="answer(form)">APPLY</md-button></md-dialog-content></md-dialog>'),t.put("app/components/myProfile/Kits.html",'<div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">FILTER KITS BY</p><div class="profile_sidebar_options"><md-button ng-click="vm.filterKits(\'all\')" class="profile_sidebar_button" analytics-on="click" analytics-event="Profile" analytics-action="kit filter">ALL</md-button><md-button ng-click="vm.filterKits(\'online\')" class="profile_sidebar_button" analytics-on="click" analytics-event="Profile" analytics-action="kit filter">ONLINE</md-button><md-button ng-click="vm.filterKits(\'offline\')" class="profile_sidebar_button" analytics-on="click" analytics-event="Profile" analytics-action="kit filter">OFFLINE</md-button></div></div><div class="profile_content_main" flex=""><div class="profile_content_main_top"><md-button class="myProfile_addKitButton" href="/kits/new">ADD A NEW KIT</md-button><span class="myProfile_content_main_title">{{ vm.filteredKits.length || 0 }} kits filtering by {{ vm.kitStatus.toUpperCase() || \'ALL\' }}</span></div><kit-list kits="vm.filteredKits"></kit-list><div class="kitList kitList_primary kitList_borderBottom" ng-show="!vm.kits.length"><div class="kitList_container"><div class="kitList_noKits"><span>There are not kits yet</span></div></div></div></div></div>'),t.put("app/components/myProfile/Tools.html",'<div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">FILTER TOOLS BY</p><div class="profile_sidebar_options"><md-button ng-click="vm.filterTools(\'all\')" class="profile_sidebar_button">ALL</md-button><md-button ng-click="vm.filterTools(\'documentation\')" class="profile_sidebar_button">DOCUMENTATION</md-button><md-button ng-click="vm.filterTools(\'community\')" class="profile_sidebar_button">COMMUNITY</md-button><md-button ng-click="vm.filterTools(\'social\')" class="profile_sidebar_button">SOCIAL</md-button></div></div><div class="profile_content_main" flex=""><div class="profile_content_main_top"><span class="profile_content_main_title">{{ vm.filteredTools.length || 0 }} tools filtering by {{ vm.toolType.toUpperCase() || \'ALL\' }}</span></div><div class="profile_content_main_kits"><div ng-repeat="tool in (vm.filteredTools = (vm.tools | filter: { type: vm.toolType } ))" ng-class="{kitList_borderBottom: $last}"><md-button ng-href="{{tool.href}}" class="kitList kitList_primary" layout="column" layout-align="start start"><h4>{{ tool.title }}</h4><p>{{ tool.description }}</p></md-button></div></div></div></div>'),t.put("app/components/myProfile/Users.html",'<div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">EDIT YOUR PROFILE</p><p class="profile_sidebar_description">A complete profile helps us to bring to you a better experience. Please, take your time completing all fields.</p><md-button ng-click="" class="profile_sidebar_button myProfile_sidebar_button"><md-icon md-svg-src="./assets/images/support_icon_blue.svg" class="profile_sidebar_avatar"></md-icon><span>Support</span></md-button><md-button ng-click="" class="profile_sidebar_button myProfile_sidebar_button"><md-icon md-svg-src="./assets/images/community_icon_blue.svg" class="profile_sidebar_avatar"></md-icon><span>Community</span></md-button></div><div class="profile_content_main" flex=""><div class="myProfile_content_form"><div class="myProfile_form_avatar" layout="row" layout-align="start center"><img ng-src="{{ vm.user.avatar || \'./assets/images/avatar.svg\' }}" class="myProfile_form_avatarImage"><md-button class="myProfile_form_avatarButton" ngf-select="" ngf-change="vm.uploadAvatar($files)">CHANGE AVATAR</md-button></div><form ng-submit="vm.updateUser(vm.formUser)"><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Username</label> <input type="text" ng-model="vm.formUser.username"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.username.length"><span ng-repeat="error in vm.errors.username">Username {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Password</label> <input type="password" ng-model="vm.formUser.password"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.password.length"><span ng-repeat="error in vm.errors.password">Password {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Email</label> <input type="email" ng-model="vm.formUser.email"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.email.length"><span ng-repeat="error in vm.errors.email">Email {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>City</label> <input type="text" ng-model="vm.formUser.city"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.city.length"><span ng-repeat="error in vm.errors.city">City {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container class="countryInput_container" flex=""><label>Country</label><md-autocomplete md-search-text="vm.searchText" md-items="item in vm.getCountries(vm.searchText)" md-item-text="item" md-selected-item="vm.formUser.country" md-floating-label="Favorite state">> <span>{{ item }}</span></md-autocomplete></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.country.length"><span ng-repeat="error in vm.errors.country">Country {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field myProfile_content_form_input"><md-input-container flex=""><label>Website</label> <input type="url" ng-model="vm.formUser.url"></md-input-container><p class="myProfile_updateForm_error" ng-show="!!vm.errors.url.length"><span ng-repeat="error in vm.errors.url">URL {{ error }}<span ng-if="!$last">,</span></span></p></div><md-button type="submit" class="myProfile_form_updateButton">UPDATE PROFILE</md-button></form><div class="clearfix"></div><div class="myProfile_apiKey" layout="row" layout-align="start center"><md-icon md-svg-src="./assets/images/key_icon.svg" class="myProfile_tab_icon"></md-icon><span class="myProfile_apiKey_text">API Key:</span><div api-key="vm.user.key"></div></div><div class="clearfix"></div><md-button ng-click="vm.removeUser()" class="warn" type="button">DELETE ACCOUNT</md-button><br><small>Delete your profile will erase all your data. Please consider think twice before click this button.</small></div></div></div>'),t.put("app/components/myProfile/myProfile.html",'<section class="myProfile_state" layout="column"><div class="profile_header myProfile_header dark"><div class="myProfile_header_container" layout="row"><img ng-src="{{ vm.user.avatar || \'./assets/images/avatar.svg\' }}" class="profile_header_avatar myProfile_header_avatar"><div class="profile_header_content"><h2 class="profile_header_name">{{ vm.user.username || \'No data\' }}</h2><div class="profile_header_location"><md-icon md-svg-src="./assets/images/location_icon_light.svg" class="profile_header_content_avatar"></md-icon><span class="h4" ng-if="vm.user.city">{{ vm.user.city }}</span> <span class="h4" ng-if="vm.user.city && vm.user.country">,</span> <span class="h4" ng-if="vm.user.country">{{ vm.user.country }}</span> <span class="h4" ng-if="!vm.user.city && !vm.user.country">No data</span></div><div class="profile_header_url"><md-icon md-svg-src="./assets/images/url_icon_light.svg" class="profile_header_content_avatar"></md-icon><a class="h4" ng-href="{{ vm.user.url || \'http://example.com\' }}">{{ vm.user.url || \'No data\' }}</a></div></div></div></div><div class="myProfile_tabs_parent" flex=""><md-tabs class="myProfile_tabs" md-center-tabs="true" md-selected="vm.startingTab"><md-tab label="" md-on-select="vm.selectThisTab(0, \'layout.myProfile.kits\')" analytics-on="click" analytics-event="Profile" analytics-action="kits"><md-tab-label><md-icon md-svg-src="./assets/images/kit_details_icon_light.svg" class="myProfile_tab_icon"></md-icon><span>KITS</span></md-tab-label><md-tab-body ui-view=""></md-tab-body></md-tab><md-tab label="" md-on-select="vm.selectThisTab(1, \'layout.myProfile.user\')" analytics-on="click" analytics-event="Profile" analytics-action="profile"><md-tab-label><md-icon md-svg-src="./assets/images/user_details_icon.svg" class="myProfile_tab_icon"></md-icon><span>USER</span></md-tab-label><md-tab-body ui-view=""></md-tab-body></md-tab><md-tab label="" md-on-select="vm.selectThisTab(2, \'layout.myProfile.tools\')" analytics-on="click" analytics-event="Profile" analytics-action="tools"><md-tab-label><md-icon md-svg-src="./assets/images/support_icon_white.svg" class="myProfile_tab_icon"></md-icon><span>TOOLS</span></md-tab-label><md-tab-body ui-view=""></md-tab-body></md-tab></md-tabs></div></section>'),t.put("app/components/passwordRecovery/passwordRecovery.html",'<header class="footer" ng-include="\'app/components/footer/footer.html\'" layout="row" layout-align="center center"></header><form name="recovery_form" ng-submit="vm.recoverPassword()" novalidate="" class="form_container recovery_container"><div class="form_contentContainer"><h2 class="form_title">FORGOT YOUR PASSWORD?</h2><div class="form_messageContainer"><p class="form_messageHeader">People looking for a better city</p><p class="form_messageSubheader">You\'re part of them? Feel free to join us!</p><p class="form_messageDescription">Please insert your email address and you will receive an email in your inbox. If you do not receive an email from our team in 10 minutes approx., please check your spam folder.</p></div><div layout="" layout-sm="column" class="formRecovery_field"><md-input-container flex=""><label>Username</label> <input type="text" name="username" ng-model="vm.username" autofocus="" ng-required="recovery_form.$submitted"></md-input-container><p class="form_errors formRecovery_errors" ng-show="vm.errors"><span ng-show="recovery_form.username.$error.required">Valid Username or Email is required</span></p></div></div><md-progress-circular ng-show="vm.waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button type="submit" class="md-flat md-primary form_button">REQUEST NEW PASSWORD</md-button></form>'),t.put("app/components/passwordRecovery/passwordRecoveryModal.html",'<md-dialog><md-dialog-content class="modal modal_recovery"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><form name="recovery_form" novalidate="" ng-submit="recoverPassword()"><div class="modal_content_container"><h2>FORGOT YOUR PASSWORD?</h2><div class="modal_message"><p class="header">People looking for a better city</p><p class="subheader">You\'re part of them? Feel free to join us!</p><p class="message">Please insert your email address and you will receive an email in your inbox. If you do not receive an email from our team in 10 minutes approx., please check your spam folder.</p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username or Email</label> <input type="text" name="input" ng-model="input" focus-input="" ng-required="recovery_form.$submitted"></md-input-container><p class="errors" ng-show="errors"><span ng-show="recovery_form.input.$error.required">Valid Username or Email is required</span></p></div></div><md-button class="md-flat md-primary main" type="submit">REQUEST NEW PASSWORD</md-button></form></md-dialog-content><p class="message_below"><span><span class="message_below_question">New here?</span><md-button class="message_below_link" ng-click="openSignup()">SIGN UP</md-button></span></p></md-dialog>'),t.put("app/components/passwordReset/passwordReset.html",'<header class="footer" ng-include="\'app/components/footer/footer.html\'" layout="row" layout-align="center center"></header><form name="form" novalidate="" ng-submit="vm.answer(vm.form)" class="form_container recovery_container"><div class="form_contentContainer"><h2 class="form_title">ENTER YOUR NEW PASSWORD</h2><div class="form_messageContainer"><p class="form_messageHeader">People looking for a better city</p><p class="form_messageSubheader">You\'re part of them? Feel free to join us!</p></div><div layout="" layout-sm="column" class="formReset_field"><md-input-container flex=""><label>New Password</label> <input type="password" name="newPassword" ng-model="vm.form.newPassword" autofocus="" ng-required="form.$submitted"></md-input-container><p class="form_errors formReset_errors" ng-show="form.$submitted || form.newPassword.$touched"><span ng-show="form.newPassword.$error.required">Password is required</span></p></div><div layout="" layout-sm="column" class="formReset_field"><md-input-container flex=""><label>Confirm Password</label> <input type="password" name="password" ng-model="vm.form.confirmPassword" ng-required="form.$submitted"></md-input-container><p class="form_errors formReset_errors" ng-show="form.$submitted || form.password.$touched"><span ng-show="form.password.$error.required">Password is required</span> <span ng-show="vm.isDifferent && !form.password.$error.required && !vm.errors.password.length">It must be the same password</span> <span ng-show="!!vm.errors.password.length"><span ng-repeat="error in vm.errors.password">Password {{ error }}<span ng-if="!$last">,</span></span></span></p></div></div><md-button class="md-flat md-primary form_button" type="submit">RESET PASSWORD</md-button></form>'),t.put("app/components/search/search.html",'<div class="search_icon"><md-icon md-svg-src="./assets/images/search_icon_white.svg" ng-show="vm.isIconWhite"></md-icon><md-icon md-svg-src="./assets/images/search_icon_black.svg" ng-show="!vm.isIconWhite"></md-icon></div><md-autocomplete md-selected-item="vm.selectedItem" md-selected-item-change="vm.selectedItemChange(item)" md-search-text="vm.searchText" md-search-text-change="vm.searchTextChange(vm.searchText)" md-items="item in vm.querySearch(vm.searchText)" md-item-text="" placeholder="Search" md-delay="300" md-min-length="3" focus=""><md-item-template layout="row" layout-align="start center"><img ng-show="item.iconType === \'img\'" ng-src="{{ item.icon }}" class="result_icon"><div ng-show="item.iconType === \'div\'" class="markerSmartCitizenOnline result_icon"></div><span ng-class="{\'result_name\': item.name.length > 0}">{{ item.name }}</span> <span class="result_location">{{ item.location }}</span></md-item-template></md-autocomplete>'),t.put("app/components/signup/signup.html",'<md-button class="md-icon-button" ng-click="vm.showSignup($event)" analytics-on="click" analytics-event="Signup" analytics-action="click">Sign Up</md-button>'),t.put("app/components/signup/signupModal.html",'<md-dialog><md-dialog-content class="modal signup"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon"><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="cancel()" class=""></md-icon></md-button><form name="form" novalidate="" ng-submit="vm.answer(vm.form)"><div class="modal_content_container"><h2>SIGN UP</h2><h3 class="header">People looking for a better city</h3><p class="subheader">You\'re part of them? Feel free to join us!</p><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Username</label> <input type="text" ng-model="vm.user.username" focus-input=""></md-input-container><p class="errors" ng-show="!!errors.username.length"><span ng-repeat="error in errors.username">Username {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Password</label> <input type="password" ng-model="vm.user.password"></md-input-container><p class="errors" ng-show="!!errors.password.length"><span ng-repeat="error in errors.password">Password {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field"><md-input-container flex=""><label>Email</label> <input type="email" ng-model="vm.user.email"></md-input-container><p class="errors" ng-show="!!errors.email.length"><span ng-repeat="error in errors.email">Email {{ error }}<span ng-if="!$last">,</span></span></p></div><div layout="" layout-sm="column" class="field"><md-checkbox ng-model="vm.user.conditions" aria-label="Terms and Conditions" required="">I <a ui-sref="layout.policy" ng-click="hide()">have read</a> and accept Terms and Conditions</md-checkbox><p class="errors" ng-show="!!errors.conditions.length"><span ng-repeat="error in errors.conditions">{{ error }}<span ng-if="!$last">,</span></span></p></div></div><md-button class="md-flat md-primary main" ng-click="answer(vm.user)">Sign up</md-button></form></md-dialog-content><p class="message_below"><span class="message_below_question">Already have an account?</span><md-button class="message_below_link" ng-click="openLogin()" analytics-on="click" analytics-event="Signup" analytics-action="login">LOG IN</md-button></p></md-dialog>'),t.put("app/components/static/about.html",'<section class="static_page" flex=""><div class="timeline" layout="row"><div class="content" layout="row" layout-align="start center" flex=""><h1>About</h1></div></div><div class="row"><div class="content"><h2>Smart Citizen</h2><h3>People looking for a better city</h3><p>What are the levels of air pollution around your home or business? and what about noise pollution? and humidity?</p><p>Now imagine that you could know them, share instantly and compare with other places in your city, in real time... How could this information help to improve our environment quality?</p><p>From Smart Citizen we want to answer to these questions and many more, through the development of low-cost sensors. Now you can be one of these sensors in a network by supporting this project. But we will not stop here... How can we built a real Smart City... by Smart Citizens?</p></div><img src="./assets/images/sck_iso.jpg" class="full-width-img"></div><div class="row"><div class="content"><h2>What</h2><h3>The platform</h3><p>Smart Citizen is a platform to generate participatory processes of people in the cities. Connecting data, people and knowledge, the objective of the platform is to serve as a node for building productive and open indicators, and distributed tools, and thereafter the collective construction of the city for its own inhabitants.</p><p>The Smart Citizen project is based on geolocation, the Internet and free hardware and software for data collection and sharing. It connects people with their environment and their city to create more effective and optimized relationships between resources, technology, communities, services and events in the urban environment.</p><p>The Smart Citizen platform is a full set of of tools waiting from you to start using them: <a href="http://beta.smartcitizen.me/signup" class="about">register to the platform</a>, check the <a href="http://new-apidocs.smartcitizen.me" class="about">API</a>, download the <a href="https://play.google.com/store/apps/details?id=com.fablabbcn.smartcitizen" class="about">Android app</a>, get a <a class="about" ng-click="vm.showStore($event)">Kit</a> or contribute to the <a href="https://github.com/fablabbcn/smartcitizen" class="about">open-source project</a>.</p><div class="subtitle-separation"><h3>The sensors</h3><p>The Smart Citizen Kit is a piece of hardware comprised of a sensor and a data-processing board, a battery and an enclousure. The first board carries sensors that measure air composition (CO and NO2), temperature, humidity, light intensity and sound levels. Once itâ€™s set up, the device will stream data measured by the sensors over Wi-Fi using the FCC-certified, wireless module on the data-processing board. The deviceâ€™s low power consumption allows for placing it on balconies and windowsills. Power to the device can be provided by a solar panel and/or battery.</p><p>The Kit is not another black box, it is compatible with Arduino and all the design files are <a href="https://github.com/fablabbcn/SmartCitizen.me" class="about">open-source</a> (schematics and firmware). For more detailed hardware specifications visit <a href="http://docs.smartcitizen.me/#/start/hardware" class="about">docs.smartcitizen.me</a>.</p><div class="embed-container"><iframe src="https://player.vimeo.com/video/145620646?title=0&byline=0&portrait=0" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe></div><div class="center"><md-button ng-click="vm.showStore($event)">Get your kit</md-button></div></div></div></div><div class="row"><div class="content"><h2>Who</h2><p>The project is born within <a href="http://fablabbcn.org" class="about">Fab Lab Barcelona</a> at the <a href="http://www.iaac.net" class="about">Institute for Advanced Architecture of Catalonia</a>, both focused centers on the impact of new technologies at different scales of human habitat, from the bits to geography.</p><div layout="row" layout-align="space-between center"><a href="http://www.fablabbcn.org/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/fablab-bcn.jpg"></md-card></a> <a href="http://www.iaac.net/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/iaac.jpg"></md-card></a> <a href="http://mediainteractivedesign.com/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/mid.jpg"></md-card></a> <a href="#" flex="22"></a></div><div class="subtitle-separation"><h3>Collaborators</h3><div layout="row" layout-align="space-between center"><a href="http://www.hangar.org" flex="22"><md-card><img src="../../../assets/images/who-section-logos/hangar.jpg"></md-card></a> <a href="http://goteo.org/project/smart-citizen-sensores-ciudadanos" flex="22"><md-card><img src="../../../assets/images/who-section-logos/goteo.jpg"></md-card></a> <a href="http://lafosca.cat" flex="22"><md-card><img src="../../../assets/images/who-section-logos/lafosca.jpg"></md-card></a> <a href="http://www.facebook.com/manifiestodesign" flex="22"><md-card><img src="../../../assets/images/who-section-logos/manifesto.jpg"></md-card></a></div></div><div class="subtitle-separation"><h3>Partners</h3><div layout="row" layout-align="space-between center"><a href="http://amsterdamsmartcity.com/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/amsterdam-smart-city.jpg"></md-card></a> <a href="https://www.waag.org/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/waag-society.jpg"></md-card></a> <a href="http://futureeverything.org/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/future-everything.jpg"></md-card></a> <a href="http://cisco.com/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/cisco.jpg"></md-card></a></div><div layout="row" layout-align="space-between center"><a href="http://intel.com/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/intel.jpg"></md-card></a> <a href="http://www.bcn.cat/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/aj-barcelona.jpg"></md-card></a> <a href="http://barcelonacultura.bcn.cat/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/barcelona-cultura.jpg"></md-card></a> <a href="https://arrayofthings.github.io/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/array-things.jpg"></md-card></a></div><div layout="row" layout-align="space-between center"><a href="http://organicity.eu/" flex="22"><md-card><img src="../../../assets/images/who-section-logos/organicity.jpg"></md-card></a> <a href="#" flex="22"></a> <a href="#" flex="22"></a> <a href="#" flex="22"></a></div></div><div class="subtitle-separation"><h3>Crowdfunding</h3><p>This project get founded thanks to lovely bakers on:</p><div class="expandable"><div class="expandBT"><h3>Kickstarter 2013</h3></div><br><div class="expand-panel kickstarter"><iframe width="580" height="430" src="https://www.kickstarter.com/projects/acrobotic/the-smart-citizen-kit-crowdsourced-environmental-m/widget/video.html" frameborder="0"></iframe><iframe frameborder="0" height="430" src="https://www.kickstarter.com/projects/acrobotic/the-smart-citizen-kit-crowdsourced-environmental-m/widget/card.html" width="220" style="float:left; margin-right:20px;"></iframe></div></div><div class="expandable sensor-image-margin"><div class="expandBT"><h3>Goteo 2012</h3></div><div class="expand-panel goteo"><p>You can find more information at <a href="http://goteo.org/project/smart-citizen-sensores-ciudadanos/" class="about">Goteo</a></p><table cellpadding="0" cellspacing="0" border="0" style="margin: 20px 0;"><tbody><tr><td width="30%">Garcia</td><td width="30%">Abraham Cembrero ZÃºÃ±iga</td><td width="30%">Adria (rzcll)</td></tr><tr><td>Aitor Aloa del Teso</td><td>Albert homs</td><td>Alberto PÃ©rez Olaya</td></tr><tr><td>Alexandre Dubor</td><td>Alex Posada</td><td>Alfonso mendoza</td></tr><tr><td>Alvaros_g</td><td>AndrÃ©s Cerezo GuillÃ©n</td><td>Ãngel D. Berruezo</td></tr><tr><td>Ãngel MuÃ±oz</td><td>Anna Kaziunas France</td><td>Antic Teatre</td></tr><tr><td>Anto Recio</td><td>Antonio GarcÃ­a CalderÃ³n</td><td>Araceli Corbo</td></tr><tr><td>Areti (IAAC)</td><td>Arnau Ayza</td><td>Arnau CangrÃ²s i Alonso</td></tr><tr><td>Arturo Saez</td><td>Avenida Sofia Hotel & Spa Sitges</td><td>babisansone</td></tr><tr><td>BaM</td><td>Beatrice ThÃ¨ves-Engelbach</td><td>Blance Duarte (blancaivette)</td></tr><tr><td>bzzzbip</td><td>Carlos Bock</td><td>Carlos Iglesias</td></tr><tr><td>castarco</td><td>champloo</td><td>Chema Casanova</td></tr><tr><td>Cliensol energy</td><td>ColaBoraBora</td><td>crisis2smart</td></tr><tr><td>Dani DÃ­az</td><td>Daniel</td><td>Daniel NÃ¼st</td></tr><tr><td>Daniel Saavedra</td><td>Daviba</td><td>David LH</td></tr><tr><td>David PeÃ±uela</td><td>David Scarlatti</td><td>Davide Gallino</td></tr><tr><td>diegobus</td><td>dpr-barcelona</td><td>dsanchezbote</td></tr><tr><td>dvd (dpa1973)</td><td>Ed Borden</td><td>Ed Mago</td></tr><tr><td>edward hollands</td><td>El Franc</td><td>Eloi Garrido</td></tr><tr><td>Eloi Maduell</td><td>Emil Lima</td><td>Emily Sato</td></tr><tr><td>enricostn</td><td>ernesto guillen fontalba</td><td>esenabre</td></tr><tr><td>Eusebio Reyero</td><td>Eva Saura</td><td>Fabien Girardin</td></tr><tr><td>Felix Dubor</td><td>FÃ©lix Pedrera GarcÃ­a</td><td>Franz Jimeno</td></tr><tr><td>Fred Adam</td><td>Felix Sainz</td><td>G!N</td></tr><tr><td>Gabo</td><td>Gerald Kogler y Marti Sanchez</td><td>Gil Obradors</td></tr><tr><td>hHenri Aboulker</td><td>hexxan labs</td><td>pfaffsandy</td></tr><tr><td>Iker Jimenez</td><td>ilitch</td><td>Inigo Barrera</td></tr><tr><td>Javier A. RodrÃ­guez</td><td>Javier Montaner</td><td>Javier SÃ¡nchez</td></tr><tr><td>Jean-Baptiste HEREN</td><td>jnogueras</td><td>Joan VallÃ©s</td></tr><tr><td>Jordi Ferran</td><td>Jorge Daniel Czajkowski</td><td>Jorge Sanz</td></tr><tr><td>JosÃ© Costoya</td><td>JosÃ© (politema)</td><td>Jose M Arbones Mainar</td></tr><tr><td>Jose Manuel</td><td>Josep PerellÃ³</td><td>josianito</td></tr><tr><td>Juan Saura RamÃ­rez</td><td>Juanjo Frechilla</td><td>JÃºlia LÃ³pez i Ventura</td></tr><tr><td>JuliÃ¡n CÃ¡naves</td><td>Kincubator</td><td>laia sÃ¡nchez</td></tr><tr><td>LauraFdez</td><td>Lucas Cappelli</td><td>Luis (Fraguada)</td></tr><tr><td>Mara Balestrini</td><td>Marc (Pous)</td><td>Marc Garriga</td></tr><tr><td>marcabra (Bravalero(</td><td>Maria MuÃ±oz</td><td>Marianella (Coronell)</td></tr><tr><td>marioarienza</td><td>Marita Bom</td><td>Marte Roel</td></tr><tr><td>mborobio</td><td>memojoelojo</td><td>Miguel Senabre</td></tr><tr><td>Miquel Colomer</td><td>miska (Goteo)</td><td>MoisÃ©s FernÃ¡ndez</td></tr><tr><td>monica donati</td><td>nadya</td><td>Natassa Pistofidou</td></tr><tr><td>Norella Coronell</td><td>Nuriona</td><td>Olivier (schulbaum)</td></tr><tr><td>Oriol Ferrer MesiÃ </td><td>Pablo Rey TristÃ¡n</td><td>Parque CientÃ­fico y TecnolÃ³gico de Bizkaia</td></tr><tr><td>Pilar Conesa</td><td>pang</td><td>Raf</td></tr><tr><td>Paula Baptista</td><td>Pere Casas Puig</td><td>Rocio Holzer</td></tr><tr><td>RaÃºl Micharet</td><td>Solo01</td><td>Rob Aalders</td></tr><tr><td>viriatov</td><td>Roberto (Madman)</td><td>Santiago Vilanova</td></tr><tr><td>Salvador Ejarque</td><td>pmisson</td><td>Sergi MartÃ­nez</td></tr><tr><td>SimÃ³n Lee</td><td>SirViente</td><td>SMD Arq (Oriol)</td></tr><tr><td>VicenÃ§ Sampera</td><td>VideoDossier</td><td>Henri Boulker</td></tr><tr><td>tiefpunkt (Severin)</td><td>xa2 (Diaz)</td><td>Xavi Polo</td></tr><tr><td>Xixo</td><td>Zeca (Fernandez)</td><td></td></tr></tbody></table></div></div></div><div layout="column" class="subtitle-separation"><h2>Team</h2><div class="team-cells-margin"><h4 class="no-margin">Tomas Diez</h4><p class="no-margin">Co-founder, strategic planning</p></div><div class="team-cells-margin"><h4 class="no-margin">Alex Posada</h4><p class="no-margin">Co-founder, project hardware design and developer</p></div><div class="team-cells-margin"><h4 class="no-margin">Guillem Camprodon</h4><p class="no-margin">Project management and development</p></div><div class="team-cells-margin"><h4 class="no-margin">M.A. Heras</h4><p class="no-margin">Hardware design and development</p></div><div class="team-cells-margin"><h4 class="no-margin">Aitor Aloa</h4><p class="no-margin">Customer support and logistics</p></div><div class="team-cells-margin"><h4 class="no-margin">John Rees</h4><p class="no-margin">Lead backend developer</p></div><div class="team-cells-margin"><h4 class="no-margin">Ãngel MuÃ±oz</h4><p class="no-margin">Hardware research and development</p></div><div class="team-cells-margin"><h4 class="no-margin">Mara Balestrini</h4><p class="no-margin">Communities development and research</p></div><div class="team-cells-margin"><h4 class="no-margin">Enrique Perotti</h4><p class="no-margin">Industrial design</p></div><div class="team-cells-margin"><h4 class="no-margin">RubÃ©n Vicario</h4><p class="no-margin">New web platform development</p></div><div class=""><h4 class="no-margin">MÃ¡ximo Gavete</h4><p class="no-margin">New web platform platform design</p></div></div><div class="subtitle-separation"><h2>Formerly team and collaborators</h2><p>We would like to thank the effort and contributions to the project of all the formerly team members and collaborators who helped the project since 2012.</p><div class="team-cells-margin"><h4 class="no-margin">Alexandre Dubor</h4><p class="no-margin">First platform design, programming and development</p></div><div class="team-cells-margin"><h4 class="no-margin">Leonardo Arrata</h4><p class="no-margin">Platform and mobile app design and development</p></div><div class="team-cells-margin"><h4 class="no-margin">Xavier Vinaixa</h4><p class="no-margin">Original platform API and mobile app development</p></div><div class="team-cells-margin"><h4 class="no-margin">Gabriel Bello-Diaz</h4><p class="no-margin">First platform design</p></div><div class="team-cells-margin"><h4 class="no-margin">Jorren Schauwaert</h4><p class="no-margin">Project management and communication</p></div><div class="team-cells-margin"><h4 class="no-margin">Alejandro Andreu</h4><p class="no-margin">Original project documentation and project revision</p></div></div><div class="subtitle-separation"><h2>Contact Us</h2><p>Please feel free to <a class="about" href="mailto:info@smartcitizen.me">contact us.</a> We will answer you as soon as possible!</p></div></div><img src="./assets/images/sck_front.jpg" class="full-width-img"></div></section>'),t.put("app/components/static/policy.html",'<section class="static_page" flex=""><div class="timeline" layout="row"><div class="content" layout="row" layout-align="start center" flex=""><h1>Policy privacy</h1></div></div><div class="row"><div class="content"><h2 id="terms-of-use" name="terms-of-use">Terms of use</h2><p>By using the Platform you acknowledge, accept and agree these Terms of Use and the Privacy Policy available at <a href="#terms-of-use" class="about">Terms of use</a>.</p><p>By using the Platform you acknowledge, accept and agree these Terms of Use and the Privacy Policy available at <a href="#">Terms of use</a>(/pages/terms).</p><h3>1. Your relationship with Smart Citizen</h3><p>1. Please note that your use of Smart Citizen website www.smartcitizen.me/ and any possible software or tool provided to you for the access/registration to and/or the use of the website <b>(hereinafter the "Platform")</b> is subject to the terms of a legal agreement between you and FabLab Barcelona, Pujades 102, Barcelona - 08005 <b>(hereinafter "Smart Citizen")</b>.</p><p>2. The legal agreement between you and Smart Citizen governing the use of the Platform is made up of the terms and conditions set out in this document <b>(hereinafter the "Terms of Use")</b> and the Smart Citizen\'s privacy policy available at <a href="#policy" class="about">Privacy policy</a> <b>(hereinafter the "Privacy Policy")</b> (collectively called the "Terms").</p><p>3. The Terms form a legally binding agreement between you and Smart Citizen in relation to your use of the Platform. It is important that you take the time to read them carefully.</p><p>4. The Terms apply to all users of the Platform, including those who are also contributing to it by uploading on the Platform data captured thought the Smart Citizen Kit <b>(hereinafter the "SCK")</b>. It is possible to purchase a SCK at the following <a ng-click="vm.showStore()" class="about" analytics-on="click" analytics-event="Kit Purchase" analytics-action="view">link</a> and this purchase is entirely regulated by the Terms and Conditions of Purchase available at the following <a href="#terms-of-use" class="about">link</a>.</p><h3>2. Accepting the Terms</h3><p>1. The Terms constitute a contract between you and Smart Citizen. If you do not agree to these Terms, you do not have the right to access or use the Platform.</p><p>2. If you do use the Platform, your use shall be deemed to confirm your acceptance of the Terms and your agreement to be a party to this binding contract.</p><p>3. You should print off or save a copy of the Terms for your records.</p><h3>3. Changes to the Terms</h3><p>1. Smart Citizen reserves the right to make changes the Terms from time to time, for example to address changes to the law or regulatory changes or changes to functionality offered through the Platform.</p><p>2. If such changes occur, Smart Citizen will do its best to provide you with advance notice, although in some situations, such as where a change is required to satisfy applicable legal requirements, an update to these Terms may need to be effective immediately. Smart Citizen will announce changes directly on the Platform and it also may elect to notify you of changes by sending an email to the address you have provided to it. In any case, the revised version of Terms of Use will be always accessible at <a href="#terms-of-use" class="about">Terms of use</a> and the revised version of the Privacy Policy will be accessible at <a href="#policy" class="about">Privacy policy</a>.</p><p>3. If Smart Citizen does update the Terms, you are free to decide whether to accept the revised terms or to stop using the Platform. Your continued use of the Platform after the date the revised Terms are posted will constitute your acceptance of these new Terms.</p><p>4. You understand and agree that You are solely responsible for periodically reviewing the Terms.</p><p>5. Except for changes made by Smart Citizen as described above, no other amendment or modification of these Terms shall be effective unless set forth in a written agreement bearing a written signature by you and Smart Citizen. For clarity, email or other communications will not constitute an effective written agreement for this purpose.</p><h3>4. Smart Citizen Platform Description</h3><p>1. The Smart Citizen Platform is born as part of a project within Fab Lab Barcelona (<a href="http://fablabbcn.org" class="about">www.fablabbcn.org</a>) at the Institute for Advanced Architecture of Catalonia (<a href="http://www.iaac.net" class="about">www.iaac.net</a>), developed in collaboration with Hangar (<a href="http://www.hangar.org" class="about">www.hangar.org</a>), focused on the impact of new technologies at different scales of human habitat, from the bits to geography.</p><p>2. Smart Citizen project is based on geolocation, Internet and free hardware and software for data collection and sharing. It aims at generating participatory processes of people in the cities. Connecting data, people and knowledge, the objective of the project is to serve as a node for building productive and open indicators and thereafter the collective construction of the city for its own inhabitants.</p><p>3. Anyone can order a Smart Citizen Kit at the following <a ng-click="vm.showStore()" class="about">link</a>. The SCK is an open source electronic sensor board equipped with air quality, temperature, sound, humidity and light quantity sensors, containing a solar charger and equipped with a WiFi antenna that allows to upload data from the sensors in real time to the Platform and make it available to the community.</p><p>4. In order to share data captured with the SCK and/or access to other user\'s data on the Platform, it is necessary to register and create a Smart Citizen account.</p><h3>5. Creating a Smart Citizen account</h3><p>1. In order to use the Platform, you need to create a Smart Citizen account. You create an account by providing Smart Citizen with username and email address and creating a password <b>(hereinafter "Account Informationâ€)</b>.</p><p>2. You are the only responsible for maintaining the accuracy, completeness and confidentiality of your Account Information, and you will be responsible for all activities that occur under your account, including activities of others to whom you have provided your Account Information. Smart Citizen is not be liable for any loss or damage arising from your failure to provide accurate information or to keep your Account Information secure. If you discover any unauthorized use of your Account Information or suspect that anyone may be able to access your private Content, you should immediately change your password and notify the Customer Support team at the following address <a href="mailto:info@smartcitizen.me" class="about">link</a>.</p><h3>6. Using the Platform and uploading Content</h3><p>1. Your use of the Platform shall be in accordance with these Terms. You agree that you are the only responsible for your own conduct and all conduct under your account.</p><p>2. Once your account is created and you accept these Terms, we grant you a limited, non-exclusive license to use the Platform subject to these Terms, for so long as you are not barred from using the Platform under the laws applicable to you, until you voluntarily close your account or until we close your account pursuant to these Terms. You do not obtain any other right or interest in the Platform.</p><p>3. Anyone can order a Smart Citizen Kit at the following <a ng-click="vm.showStore()" class="about">link</a>. The SCK is an open source electronic sensor board equipped with air quality, temperature, sound, humidity and light quantity sensors, containing a solar charger and equipped with a WiFi antenna that allows to upload data from the sensors in real time to the Platform and make it available to the community.</p><p>4. In order to share data captured with the SCK and/or access to other user\'s data on the Platform, it is necessary to register and create a Smart Citizen account.</p><p>5. You agree that you are the sole responsible as the person who created the Content or introduced it into the Platform. This applies whether the Content is kept private, shared or transmitted using the Platform or any third party application or services integrated with the Platform.</p><p>6. Smart Citizen is not liable for the Content or accuracy of any information, and shall not be responsible for any acts taken or decisions made based on such information.</p><p>7. Smart Citizen does not select or screen Content, and does not review, test, confirm, approve or verify any user data or Content or the accuracy of it. Smart Citizen access to/storing of/use of Content does not imply or create any liability on the part of it. However, Smart Citizen reserves in some circumstances the right to edit, limit or remove any such Content in its sole discretion and will not be responsible for any Content deleted or for your inability to submit any Content.</p><h3>7. Restricted use of the Platform</h3><p>1. You agree not to use the Platform for any illegal purpose nor to post, distribute, or otherwise make available or transmit any data, software or other computer files that (i) contain a virus, trojan horse, worm or other harmful or destructive component, (ii) infringe third parties\' rights (intellectual property rights and personality rights).</p><p>2. You agree not to alter or modify any part of the Platform and its related technologies nor to (or attempt to) circumvent, disable or otherwise interfere with any security related features of the Platform.</p><p>3. You agree not to distribute any part of or parts of the Platform, including but not limited to any Content, in any medium without Smart Citizen\'s prior written authorisation, unless Smart Citizen makes available the means for such distribution through functionality offered by the Platform. You also agree not to access Content through any technology or means other than those Smart Citizen may explicitly designate for this purpose.</p><p>4. You agree not to massively collect or harvest or use Content or any other data available thought the platform (including users\' data such as account names), unless you agree on keeping all generated analysis data sets open and available on the Platform.</p><p>5. You agree not to use the Platform or any data available through the platform for commercial use unless you obtain Smart Citizen\'s prior written approval nor to solicit, for such commercial purposes, any users of the Platform with respect to their Content;</p><p>6. You agree that you are solely responsible for (and that Smart Citizen has no responsibility to you or to any third party for) any breach of your obligations under the Terms and for the consequences of any such breach.</p><h3>8. Content rights and licenses</h3><p>1. You retain copyright and any other rights you already held in your Content before you submitted, posted or displayed it on or through the Platform. Other than the limited license and other rights you grant in these Terms, Smart Citizen acknowledges and agrees that it do not obtain any right, title or interest from you under these Terms in any of your Content.</p><p>2. By using the Platform and uploading you grant Smart Citizen a limited license in order to make your data accessible and usable on the Platform. Thus, you grant Smart Citizen a license to display, execute, and distribute any of your Content and to modify for technical purposes and reproduce such Content to enable Smart Citizen to operate the Platform. You also agree that Smart Citizen has the right to elect not to accept, post, execute, store, display, publish or transmit any Content. You agree that these rights and licenses are royalty free, irrevocable and worldwide (for so long as your Content is accessible on the Platform), and include a right for Smart Citizen to make such Content available to, and pass these rights along to, others with whom this latter has contractual relationships related to the provision of the Platform, solely for the purpose of providing Platform\'s services, and to otherwise permit access to or disclose your Content to third parties if it determines such access is necessary to comply with its legal obligations.</p><p>3. Except as described in these Terms of Use, unless you elect to enable others to view or have access to the Content you submit to the Platform, no one else should see your Content without your consent. Of course, if you do elect to publish or share any portion of your Content by creating a feed of information, or creating a webservice to publish Content, then you would be enabling each of those permitted users to access, use, display, perform, distribute and modify your Content. In addition, Smart Citizen enables you to use a variety of third party services and applications that interact with the Platform and your Content, and you should review the access rights you provide to those services or applications, as you may enable them to access your Content through your agreements with those parties.</p><p>4. You also represent and warranty that, by submitting Content to the Platform and granting Smart Citizen the rights described in these Terms, you are not infringing the rights of any person or third party.</p><h3>9. Changes to the Platform</h3><p>1. We retain the right, in our sole discretion, to implement new elements as part of and/or ancillary to the Platform, including changes that may affect its previous mode of operation.</p><p>2. We also reserve the right to establish limits to the nature or size of storage available to you, the number of transmissions and email messages, execution of you program code, your Content and other data, and impose other limitations at any time, with or without notice.</p><p>3. You agree that Smart Citizen has no responsibility or liability as a result of, without limitation, the deletion of, or failure to make available to you, any Content. You agree that we shall not be liable to you or to any third party for any modification, suspension or discontinuance of any part of the Platform.</p><h3>10. Termination</h3><p>1. You may close your Platform account at any time, for any reason (or no reason), and you do not even have to give us notice.</p><p>2. Smart Citizen may suspend access to your account, or close your account according to these Terms. Reasons for Smart Citizen suspending or closing your account may include, without limitation: (i) breach or violation of these Terms or any other agreement between you and Smart Citizen and related to the use of the Platform, (ii) the discontinuance or material modification of the Platform (or any part thereof) or (iii) unexpected technical or security issues or problems. In most cases, in the event we elect to close your account, we will provide at least 30 days advance notice to you at the email address you have provided at the creation of the account. After the expiration of this notice period, you will no longer be able to retrieve Content contained in that account or otherwise use the Platform through that account.</p><p>3. Smart Citizen shall not be liable to you or any third party for termination of the Platform.</p><p>4. All disclaimers, limitations of warranties and damages, and confidential commitments set forth in these Terms of Use or otherwise existing at law survive any termination, expiration of these Terms of Use.</p><h3>11. Third-Party Links, applications or APIs</h3><p>1. We may include or recommend third party resources, materials and developers and/or links to third party websites and applications as part of, or in connection with, the Platform. We have no control over such sites or developers and, accordingly, you acknowledge and agree that (i) we are not responsible for the availability of such external sites or applications; (ii) we are not responsible or liable for any content or other materials or performance available from such sites or applications and (iii) we shall not be responsible or liable, directly or indirectly, for any damage or loss caused or alleged to be caused by or in connection with use of or reliance on any such content, materials or applications.</p><h3>12. Indemnity</h3><p>1. You agree to indemnify and hold Smart Citizen, its subsidiaries, affiliates, officers, agents, employees, advertisers and partners harmless from and against any and all claims, liabilities, damages (actual and consequential), losses and expenses (including legal and other professional fees) arising from or in any way related to any third party claims relating to your use of any of the Platform, any violation of these Terms of Use or any other actions connected with your use of the Platform (including all actions taken under your account). In the event of such claim, we will provide notice of the claim, suit or action to the contact information we have for the account, provided that any failure to deliver such notice to you shall not eliminate or reduce your indemnification obligation hereunder.</p><h3>13. High Risk Activities</h3><p>1. Smart Citizen Platform are not fault-tolerant and are not designed, manufactured or intended for use as or with on-line control equipment in hazardous environments requiring fail-safe performance, such as in the operation of nuclear facilities, aircraft navigation or communication systems, air traffic control, direct life support machines or weapon systems in which the failure of the Platforms could lead directly to death, personal injury or severe physical or environmental damage ("High Risk Activities"). Accordingly, Smart Citizen and its suppliers specifically disclaim any express or implied warranty of fitness for High Risk Activities.</p><h3>14. The Platform is Available â€œAs Is.â€</h3><p>1. The Platform is Available â€œAs Is.â€ YOU EXPRESSLY UNDERSTAND AND AGREE THAT:</p><p>1.1. YOUR USE OF THE PLATFORM IS AT YOUR SOLE RISK. THE PLATFORM IS PROVIDED ON AN â€œAS ISâ€ AND â€œAS AVAILABLEâ€ BASIS. TO THE MAXIMUM EXTENT PERMITTED BY LAW, SMART CITIZEN EXPRESSLY DISCLAIMS ALL WARRANTIES AND CONDITIONS OF ANY KIND, WHETHER EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO THE IMPLIED WARRANTIES AND CONDITIONS OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT;</p><p>1.2. SMART CITIZEN DOES NOT WARRANT THAT (i) THE PLATFORM WILL MEET ALL OF YOUR REQUIREMENTS; (ii) THE PLATFORM WILL BE UNINTERRUPTED, TIMELY, SECURE OR ERROR-FREE; OR (iii) ALL ERRORS IN THE SOFTWARE OR PLATFORM WILL BE CORRECTED;</p><p>1.3. ANY MATERIAL DOWNLOADED OR OTHERWISE OBTAINED THROUGH THE USE OF THE PLATFORM IS DONE AT YOUR OWN DISCRETION AND RISK AND THAT YOU ARE SOLELY RESPONSIBLE FOR ANY DAMAGE TO YOUR COMPUTER SYSTEMS OR OTHER DEVICE OR LOSS OF DATA THAT RESULTS FROM THE DOWNLOAD OF ANY SUCH MATERIAL;</p><p>1.4. NO ADVICE OR INFORMATION, WHETHER ORAL OR WRITTEN, OBTAINED BY YOU FROM SMART CITIZEN OR THROUGH OR FROM THE PLATFORM SHALL CREATE ANY WARRANTY NOT EXPRESSLY STATED IN THESE TERMS OF USE.</p><p>2. Until further notice Smart Citizen Platform is provided as a Beta software release which means THERE IS NO SERVICE LEVEL AGREEMENT AND NO WARRANTY OF SERVICE AVAILABILITY.</p><h3>15. Limitation of Liability</h3><p>1. YOU EXPRESSLY UNDERSTAND AND AGREE THAT SMART CITIZEN, ITS SUBSIDIARIES, AFFILIATES AND LICENSORS, AND OUR AND THEIR RESPECTIVE OFFICERS, EMPLOYEES, AGENTS AND SUCCESSORS SHALL NOT BE LIABLE TO YOU FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR EXEMPLARY DAMAGES, INCLUDING BUT NOT LIMITED TO, DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA, COVER OR OTHER INTANGIBLE LOSSES (EVEN IF SMART CITIZEN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES) RESULTING FROM:</p><p>1.1. THE USE OR THE INABILITY TO USE THE PLATFORM;</p><p>1.2. UNAUTHORIZED ACCESS TO OR THE LOSS, CORRUPTION OR ALTERATION OF YOUR TRANSMISSIONS, CONTENT OR DATA;</p><p>1.3. STATEMENTS OR CONDUCT OF ANY THIRD PARTY ON OR USING THE PLATFORM;</p><p>1.4. SMART CITIZEN ACTIONS OR OMISSIONS IN RELIANCE UPON YOUR ACCOUNT INFORMATION AND ANY CHANGES THERETO OR NOTICES RECEIVED THEREFROM;</p><p>1.5. YOUR FAILURE TO PROTECT THE CONFIDENTIALITY OF ANY PASSWORDS OR ACCESS RIGHTS TO YOUR ACCOUNT INFORMATION;</p><p>1.6. THE ACTS OR OMISSIONS OF ANY THIRD PARTY USING OR INTEGRATING WITH THE PLATFORM;</p><p>1.7. THE TERMINATION OF YOUR ACCOUNT IN ACCORDANCE WITH THESE TERMS; OR</p><p>1.8. ANY OTHER MATTER RELATING TO THE PLATFORM.</p><p>2. NOTHING IN THESE TERMS IS INTENDED TO EXCLUDE OR LIMIT ANY CONDITION, WARRANTY, RIGHT OR LIABILITY WHICH MAY NOT BE LAWFULLY EXCLUDED OR LIMITED.</p><h3>16. Miscellaneous</h3><p>1. These Terms of Use shall be governed by and construed in accordance with Spanish laws, without giving effect to any principles of conflict of law. You agree that any action at law or in equity arising out of or relating to these Terms of Use shall be filed only in Spanish Courts and you hereby consent and submit to the personal jurisdiction of such courts for the purposes of litigating any such action.</p><p>2. These Terms of Use shall be governed by and construed in accordance with Spanish laws, without giving effect to any principles of conflict of law. You agree that any action at law or in equity arising out of or relating to these Terms of Use shall be filed only in Spanish Courts and you hereby consent and submit to the personal jurisdiction of such courts for the purposes of litigating any such action.</p><p>3. No party shall be liable for any performance failure, delay in performance, or lost data under these Terms of Use due to causes beyond that party\'s reasonable control and occurring without its fault or negligence.</p><p>4. The failure of Smart Citizen to partially or fully exercise any right shall not prevent the subsequent exercise of such right. The waiver by Smart Citizen of any breach shall not be deemed a waiver of any subsequent breach of the same or any other term of these Terms of Use. No remedy made available to Smart Citizen by any of the provisions of these Terms of Use is intended to be exclusive of any other remedy, and each and every remedy shall be cumulative and in addition to every other remedy available at law or in equity.</p><p>5. All products, company names, brand names, trademarks and logos are the property of their respective owners.</p></div></div><div class="row"><div class="content"><h2 id="policy" name="policy">Privacy</h2><p>This Privacy Policy explains what information Smart Citizen collects about you and why. Please read it carefully.</p><h3>1. The purpose of this Privacy Policy</h3><p>1. This Privacy Policy shall be read together with and in accordance with Smart Citizen Platform Terms of Use available at <a href="#terms-of-use" class="about">Terms of use</a> <b>(hereinafter the "Terms of Use")</b>, and applies to the personal data obtained by Smart Citizen through your use of the Smart Citizen Platform. The terms and definition used in this Privacy Policy shall have the meanings provided for in the Terms of Use if not otherwise defined.</p><h3>2. Changes to the Privacy Policy</h3><p>1. According to Smart Citizen evolution, we may need to update this Privacy Policy and change in the Terms of Use. We will always maintain our commitment to respect your privacy and comply with the laws applicable to us and to you.</p><p>2. We will always publish any revised Privacy Policy, along with its effective date, in the following page <a href="#policy" class="about">Privacy policy</a>.</p><p>3. If required by applicable law, we will obtain your consent to such changes. In the other cases, please note that your continuation of your Smart Citizen Platform account after any change means that you agree with, and consent to be bound by, the revised Privacy Policy. If you disagree with any changes and do not wish your personal data to be subject to the revised Policy, you will need to close your account before the new Policy becomes effective.</p><h3>3. Personal Data processed</h3><p>1. In order to operate the Platform, Smart Citizen collects personal data about platform\'s users. Two main types of information are processed:<</p><p>1.1. Users\' personal data related to the creation and the maintenance of the Platform account (e.g. your username, email address, geo localisation and other personal information you provided at the creation of the account) ("<b>Personal Account Information</b>").</p><p>1.2. Information collected by Google Analytics and other tools while you navigate through the Platform, in order to help us to improve the service ("<b>Anonymous Data</b>")<b>(hereinafter collectively called "Personal Data")</b>.</p><p>2. Smart Citizen also passively stores Content you add/post/upload to your account but it do not autonomously collect or process those Content for its own purposes. You remain the only responsible, liable of the Content, and the only data controller in relation to personal data possibly published/uploaded in your account.</p><h3>4. Processing purposes</h3><p>1. All Personal Data received from you will be treated fairly and lawfully.</p><p>1.1. (a) The processing of Personal Account Information: (i) allows Smart Citizen to create and maintain your account, operate the Platform and provide the service; (ii) helps Smart Citizen communicate with you about your use of the Platform as well as answer to your assistance requests (iii) may be used by Smart Citizen for marketing purposes such as sending information material (i.e. commercial communications) and marketing emails. Providing your Personal Data for marketing purposes is a mere faculty and you are able to revoke your consent at any time (you can opt-out of such communications at any time by clicking the "unsubscribe" link found within Smart Citizen email). Any non-submission of Persona Data for such activities will have no consequence on the user\'s possibility to use the services and features offered by the Platform.</p><p>1.2. (b) Anonymous Data and automatic data collection tools: as you navigate through Smart Citizen Platform, certain anonymous information will be gathered without your actively providing the information. This information might be collected using various technologies, such as cookies, Internet tags or web beacons, and navigational data collection (log files, server logs, clickstream). Additional information is collected from your internet browser (such as the URL of the website you just came from, the Internet Protocol (IP) address, the browser version your computer or mobile device is currently using, the date and time you access the Platform and the pages that you access while at the Platform). This information is used exclusively for statistical purposes and in anonymous form in relation to the access of the Platform and for purposes of monitoring the correct functioning of the Platform and of enhancing its functioning and content.</p><h3>5. Personal Data communication by Smart Citizen</h3><p>1. Smart Citizen is not in the business of selling or renting user information, and it only discloses Personal data when:</p><p>1.1. We have your explicit consent to share the information;</p><p>1.2. We need to share your information with affiliated and unaffiliated service providers to fulfil the service request;</p><p>1.3. We believe it is necessary to investigate potential violations of our Terms of Use, to enforce them, or when we believe it is necessary to investigate, prevent or take action regarding illegal activities, suspected fraud or potential threats against persons, property or the systems on which we operate the Platform;</p><p>1.4. In any other case provided for by the applicable law, including compliance with warrants, court orders or other legal process.</p><h3>6. Your rights</h3><p>1. 1. Data subjects have the right to ask for confirmation, amendment, update and cancellation of her/his personal data as well as oppose unlawful processing.</p><p>2. If you wish to (i) access any personal data Smart Citizen hold about you; (ii) request that Smart Citizen corrects or deletes your personal data; or (iii) request that Smart Citizen not use or stop using your persona data for marketing purposes may do so by contacting us at <a href="mailto:info@smartcitizen.me" class="about">info@smartcitizen.me</a>. We will comply with such requests to the extent permitted or required by applicable laws.</p><h3>7. Personal Data storage and transmission within the European Union:</h3><p>1. When you use Smart Citizen Platform your Personal Data will be stored in servers which are currently located in Spain. By using Smart Citizen Platform you are confirming your consent to such information, including Personal Information and Content, being hosted and accessed in Spain.</p><p>2. Personal Data may be communicated to and shared with other companies in accordance with section 5 above but the transfer will always occur within the European Economic Area ("EEA").</p><h3>8. Security of you Data and data breach</h3><p>1. Smart Citizen is committed to protecting the security of your information and takes reasonable precautions to protect it. However, Internet data transmissions, whether wired or wireless, cannot be guaranteed to be 100% secure, and as a result, Smart Citizen cannot ensure the security of information you transmit by using the Platform. Accordingly, you acknowledge that you do so at your own risk. Once Smart Citizen receive your data transmission, we make all commercially reasonable efforts to ensure its security on our systems.</p><p>2. If Smart Citizen learns of a security system breach, we will notify you and provide information on protective steps, if available, through the email address that you have provided to Smart Citizen or by posting a notice on our Platform.</p><h3>9. Other websites and applications</h3><p>1. The Platform may contain links to other websites and applications. Smart Citizen is not responsible for the privacy policies or privacy practices of any third party.</p><h3>10. Data Controller and contacts</h3><p>1. The data controller in relation to the Persona Data as defined and described above is: <span class="">[PLEASE INSERT THE NAME AND ADRESS OF THE DATA CONTROLLER]</span></p><p>2. If you have questions, comments or concerns about this Privacy Policy, please contact us by email at <a href="mailto:info@smartcitizen.me" class="about">info@smartcitizen.me</a>.</p></div></div></section>'),t.put("app/components/static/static.html",'<section class="static_page" flex=""><div class="timeline" layout="row"><div class="content" layout="row" layout-align="start center" flex=""><h1>Title</h1></div></div><div class="row"><div class="content"><h2>Heading 2</h2><h3>Heading 3</h3><h4>Heading 4</h4><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam a porta quam. Phasellus tincidunt facilisis blandit. Aenean tempor diam quis turpis vestibulum, ac semper turpis mollis. Sed ac ultricies est. Vivamus efficitur orci efficitur turpis commodo dignissim. Aliquam sagittis risus in semper ullamcorper. Sed enim diam, tempus eget lorem sit amet, luctus porta enim. Nam aliquam mollis massa quis euismod. In commodo laoreet mattis. Nunc auctor, massa ut sollicitudin imperdiet, mauris magna tristique metus, quis lobortis ex ex id augue. In hac habitasse platea dictumst. Sed sagittis iaculis eros non sollicitudin. Sed congue, urna ut aliquet ornare, nisi tellus euismod nisi, a ullamcorper augue arcu sit amet ante. Mauris condimentum ex ante, vitae accumsan sapien vulputate in. In tempor ligula ut scelerisque feugiat. Morbi quam nisi, blandit quis malesuada sit amet, gravida ut urna.</p><md-button class="md-primary md-raised">button</md-button><md-button class="md-primary">button</md-button></div></div><div class="row"><div class="content"><h2>Heading 2</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam a porta quam. Phasellus tincidunt facilisis blandit. Aenean tempor diam quis turpis vestibulum, ac semper turpis mollis. Sed ac ultricies est. Vivamus efficitur orci efficitur turpis commodo dignissim. Aliquam sagittis risus in semper ullamcorper. Sed enim diam, tempus eget lorem sit amet, luctus porta enim. Nam aliquam mollis massa quis euismod. In commodo laoreet mattis. Nunc auctor, massa ut sollicitudin imperdiet, mauris magna tristique metus, quis lobortis ex ex id augue. In hac habitasse platea dictumst. Sed sagittis iaculis eros non sollicitudin. Sed congue, urna ut aliquet ornare, nisi tellus euismod nisi, a ullamcorper augue arcu sit amet ante. Mauris condimentum ex ante, vitae accumsan sapien vulputate in. In tempor ligula ut scelerisque feugiat. Morbi quam nisi, blandit quis malesuada sit amet, gravida ut urna.</p></div></div><div class="row"><div class="content"><h2>Small section</h2><p>Single line comment.</p></div></div></section>'),t.put("app/components/static/styleguide.html",'<div class="styleguide"><section class="profile_header"><h1 class="sg-pageTitle">Smart Citizen Style Guide</h1></section><section layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">MENU</p><div class="profile_sidebar_options"><button class="profile_sidebar_button md-button md-default-theme">Fonts</button> <button class="profile_sidebar_button md-button md-default-theme">Buttons</button> <button class="profile_sidebar_button md-button md-default-theme">Colors</button></div></div><div flex="" class="profile_content_main"><h2 class="sg-titles">Font style - Light theme</h2><div layout="column" class="section-padding" style="border:1px solid rgba(0,0,0,0.12)"><div layout="row"><h1 flex="50">h1 Heading</h1><h1 class="info-text" flex="30">2.2 em</h1><h1 class="info-text" flex="20">normal</h1></div><md-divider></md-divider><div layout="row"><h2 flex="50">h2 Heading</h2><h2 class="info-text" flex="30">1.7 em</h2><h2 class="info-text" flex="20">normal</h2></div><md-divider></md-divider><div layout="row"><h3 flex="50">h3 Heading</h3><h3 class="info-text" flex="30">1.3 em</h3><h3 class="info-text" flex="20">bold</h3></div><md-divider></md-divider><div layout="row"><h4 flex="50">h4 Heading</h4><h4 class="info-text" flex="30">1.1 em</h4><h4 class="info-text" flex="20">normal</h4></div><md-divider></md-divider><div layout="row"><p flex="50">Paragraph</p><p class="info-text" flex="30">1 em</p><p class="info-text" flex="20">normal</p></div><md-divider></md-divider><div layout="row"><p flex="50" class="sg-paragraph2">Paragraph info</p><p class="info-text" flex="30">1 em</p><p class="info-text" flex="20">lighter</p></div><md-divider></md-divider><small>Small text</small></div><div class="sg-text-box"><pre>\n          <code>\n            <span>&lt;h1&gt;</span> h1 heading <span>&lt;/h1&gt;</span>\n            <span>&lt;h2&gt;</span> h2 heading <span>&lt;/h2&gt;</span>\n            <span>&lt;h3&gt;</span> h3 heading <span>&lt;/h3&gt;</span>\n            <span>&lt;h4&gt;</span> h4 heading <span>&lt;/h4&gt;</span>\n            <span>&lt;p&gt;</span>  Paragraph  <span>&lt;/p&gt;</span>\n            <span>&lt;small&gt;</span> Small text<span>&lt;/small&gt;</span>\n          </code>\n        </pre></div><h2 class="sg-titles">Font style - Dark theme</h2><div class="dark-text-section section-padding"><div layout="row"><h1 flex="50">h1 Heading</h1><h1 flex="30" class="info-text-dark">1.8 em</h1><h1 flex="20" class="info-text-dark">normal</h1></div><md-divider class="dark-theme-divider"></md-divider><div layout="row"><h2 flex="50">h2 Heading</h2><h2 flex="30" class="info-text-dark">1.7 em</h2><h2 flex="20" class="info-text-dark">normal</h2></div><md-divider class="dark-theme-divider"></md-divider><div layout="row"><h4 flex="50">h4 Heading</h4><h4 flex="30" class="info-text-dark">1.1 em</h4><h4 flex="20" class="info-text-dark">normal</h4></div><md-divider class="dark-theme-divider"></md-divider><div layout="row"><h6 flex="50">h6 Heading</h6><h6 flex="30" class="info-text-dark">0.75 em</h6><h6 flex="20" class="info-text-dark">bold</h6></div><md-divider class="dark-theme-divider"></md-divider><div layout="row"><p flex="50">Paragraph</p><p flex="30" class="info-text-dark">1 em</p><p flex="20" class="info-text-dark">lighter</p></div><md-divider class="dark-theme-divider"></md-divider><br><small>Small text</small></div><div class="sg-text-box"><pre>\n          <code class="">\n            <span>&lt;div class="dark-theme-section"&gt;</span>\n              <span>&lt;h1&gt;</span> h1 heading <span>&lt;/h1&gt;</span>\n              <span>&lt;h2&gt;</span> h2 heading <span>&lt;/h2&gt;</span>\n              <span>&lt;h3&gt;</span> h3 heading <span>&lt;/h3&gt;</span>\n              <span>&lt;h4&gt;</span> h4 heading <span>&lt;/h4&gt;</span>\n              <span>&lt;p&gt;</span>  Paragraph  <span>&lt;/p&gt;</span>\n              <span>&lt;small&gt;</span> Small text<span>&lt;/small&gt;</span>\n            <span>&lt;/div&gt;</span>  \n          </code>\n        </pre></div><h2 class="sg-titles">Buttons</h2><div flex="" layout="row" class="section-padding" style="border:1px solid rgba(0,0,0,0.12)"><div flex="25"><md-button>Button</md-button><br><md-button class="md-warn sg-button-margin">Warn button</md-button></div><div flex="25"><md-button ng-href="/about" class="call-to-action">Link button</md-button><br><md-button class="md-flat md-primary sg-button-margin">Raised button</md-button></div><div flex="25"><span class="label">offline</span> <span class="tag">Barcelona</span></div></div><div class="sg-text-box"><pre>\n          <code>\n            <span>&lt;md-button&gt;</span> Button <span>&lt;/md-button&gt;</span>\n            <span>&lt;md-button class="call-to-action"&gt;</span> Link button< span>&lt;/md-button&gt;\n            <span>&lt;md-button class="label"&gt;</span> offline <span>&lt;/md-button&gt;</span>\n            <span>&lt;md-button class="tag"&gt;</span> Barcelona <span>&lt;/md-button&gt;</span>\n            <span>&lt;md-button class="md-warn"&gt;</span> Warn button <span>&lt;/md-button&gt;</span>\n            <span>&lt;md-button class="md-flat md-primary"&gt;</span> Raised button <span>&lt;/md-button&gt;</span>\n          </code>\n        </pre></div><h2 class="sg-titles">Colors</h2><div class="colors-section section-padding" style="border:1px solid rgba(0,0,0,0.12)"><div layout="row"><div flex="20" class="secondary-color"><p>#065063</p><p>$secondary_color</p></div><div flex="20" class="terciary_color"><p>#38CEF3</p><p>$terciary_color</p></div><div flex="20" class="secondary_color_light"><p>#8DB2BA</p><p>$secondary_color_light</p></div><div flex="20" class="secondary-color-pastel"><p>#C8E6ED</p></div><div flex="20" class="white"><p>#FFFFFF</p></div></div></div><div class="sg-text-box"><pre>\n          <code class="">\n            <span>&lt;div class="secondary-color"&gt;</span> \n              &lt;p&gt;#065063&lt;/p&gt;\n              &lt;p&gt;$secondary_color&lt;/p&gt;\n            <span>&lt;/div&gt;</span>\n\n            <span>&lt;div class="terciary_color"&gt;</span> \n              &lt;p&gt;#38CEF3&lt;/p&gt;\n              &lt;p&gt;$terciary_color&lt;/p&gt;\n            <span>&lt;/div&gt;</span>\n\n            <span>&lt;div class="secondary_color_light"&gt;</span> \n              &lt;p&gt;#8DB2BA&lt;/p&gt;\n              &lt;p&gt;$secondary_color_light&lt;/p&gt;\n            <span>&lt;/div&gt;</span>\n\n            <span>&lt;div class="secondary-color-pastel"&gt;</span> \n              &lt;p&gt;#065063&lt;/p&gt;\n              &lt;p&gt;$secondary_color&lt;/p&gt;\n            <span>&lt;/div&gt;</span>\n\n            <span>&lt;div class="white"&gt;</span> \n              &lt;p&gt;#FFFFFF&lt;/p&gt;\n            <span>&lt;/div&gt;</span>\n          </code>\n        </pre></div></div></section></div>'),t.put("app/components/store/store.html",'<md-button class="md-flat full_height" ng-class="{navbar_highlight_button: isLoggedin}" ng-click="showStore($event)" analytics-on="click" analytics-event="Kit Purchase" analytics-action="view">Get your Kit</md-button>'),t.put("app/components/store/storeModal.html",'<md-dialog><md-dialog-content class="modal modal_store"><md-progress-circular ng-show="waitingFromServer" class="md-hue-3 login_spinner" md-mode="indeterminate"></md-progress-circular><md-button class="close_icon" aria-label=""><md-icon md-svg-icon="./assets/images/close_icon_blue.svg" ng-click="hide()" class=""></md-icon></md-button><section><div class="modal_content_container"><h2>SHOP</h2><h3 class="header store">Get your Smartcitizen Kit</h3><p class="subheader store">An Open-Source Environmental Monitoring Platform consisting of arduino-compatible hardware, data visualization web API, and mobile app.</p><div class="main_content" layout="row" layout-align="space-between center" layout-padding=""><img class="store_itemImage" src="assets/images/sckit_avatar.jpg" alt="Smartcitizen Kit"><div class="store_itemDescription"><h3>This is what you get</h3><ul><li>Smart Citizen Kit (Data board,<br>Ambient board and battery)</li><li>Platform life subscription</li><li>Private REST API Key</li><li>Android App (iOS comming soon!)</li><li><i>Note: Outdoor enclosure available<br>separately</i></li></ul></div></div></div><form action="https://www.paypal.com/cgi-bin/webscr" method="post" data-ajax="no" target="_top"><input type="hidden" name="cmd" value="_s-xclick"> <input type="hidden" name="hosted_button_id" value="ZKWC47Y7FPPLE"> <input type="hidden" name="os0" value="Sensor Kit (with Ambient Sensor Board)"> <input type="hidden" name="currency_code" value="EUR"><md-button type="submit" name="submit" class="md-flat md-primary main" analytics-on="store" analytics-event="Kit Purchase" analytics-action="purchase">ORDER WITH PAYPAL</md-button><img alt="" style="position:absolute" border="0" src="https://www.paypalobjects.com/es_ES/i/scr/pixel.gif" width="1" height="1"></form></section></md-dialog-content></md-dialog>'),t.put("app/components/userProfile/userProfile.html",'<section class="myProfile_state" layout="column"><div class="profile_header myProfile_header dark"><div class="myProfile_header_container" layout="row"><img ng-src="{{ vm.user.avatar || \'./assets/images/avatar.svg\' }}" class="profile_header_avatar myProfile_header_avatar"><div class="profile_header_content"><h2 class="profile_header_name">{{ vm.user.username || \'No data\' }}</h2><div class="profile_header_location"><md-icon md-svg-src="./assets/images/location_icon_light.svg" class="profile_header_content_avatar"></md-icon><span class="h4" ng-if="vm.user.city">{{ vm.user.city }}</span> <span class="h4" ng-if="vm.user.city && vm.user.country">,</span> <span class="h4" ng-if="vm.user.country">{{ vm.user.country }}</span> <span class="h4" ng-if="!vm.user.city && !vm.user.country">No data</span></div><div class="profile_header_url"><md-icon md-svg-src="./assets/images/url_icon_light.svg" class="profile_header_content_avatar"></md-icon><a class="h4" ng-if="vm.user.url != undefined" ng-href="{{ vm.user.url }}">vm.user.url</a> <span class="h4" ng-if="vm.user.url == undefined">No website defined</span></div></div></div></div><div class="profile_content" layout="row"><div class="profile_sidebar"><p class="profile_sidebar_title">FILTER KITS BY</p><div class="profile_sidebar_options"><md-button ng-click="vm.filterKits(\'all\')" class="profile_sidebar_button" analytics-on="click" analytics-event="Profile" analytics-action="kit filter">ALL</md-button><md-button ng-click="vm.filterKits(\'online\')" class="profile_sidebar_button" analytics-on="click" analytics-event="Profile" analytics-action="kit filter">ONLINE</md-button><md-button ng-click="vm.filterKits(\'offline\')" class="profile_sidebar_button" analytics-on="click" analytics-event="Profile" analytics-action="kit filter">OFFLINE</md-button></div></div><div class="profile_content_main" flex=""><div class="profile_content_main_top"><span class="profile_content_main_title">{{ vm.filteredKits.length || 0 }} kits filtering by {{ vm.status.toUpperCase() || \'ALL\' }}</span></div><div class="profile_content_main_kits"><kit-list kits="(vm.filteredKits = (vm.kits | filterLabel:vm.kitStatus ))"></kit-list><div class="kitList kitList_primary kitList_borderBottom" ng-show="!vm.kits.length"><div class="kitList_container"><div class="kitList_noKits"><span>There are not kits yet</span></div></div></div></div></div></div></section>'),t.put("app/components/kit/editKit/editKit.html",'<section class="kit_dataChange"><section class="timeline" flex="1" layout="row" layout-align="center center"><div class="timeline_container" layout="row" layout-align="space-between center"><div layout="row" layout-align="start center"><div class="timeline_stepCircle" ng-class="{\'is-on\':vm.step===1, \'is-off\':vm.step!==1}" layout="row" layout-align="center center">1</div><div class="timeline_stepName">Kit data</div><div class="timeline_line timeline_line_small"></div><div layout="row" layout-align="start center"><div class="timeline_stepCircle" ng-class="{\'is-on\':vm.step===2, \'is-off\':vm.step!==2}" layout="row" layout-align="center center">2</div><div class="timeline_stepName">Set up</div></div></div><md-button class="md-flat md-primary timeline_buttonBack" ng-click="vm.backToProfile()">Back to Profile</md-button><md-button class="md-flat md-primary timeline_buttonSave" ng-click="vm.submitForm()">Save</md-button></div></section><section class="timeline_content" flex="1"><section ng-show="vm.step === 1"><form><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Basic information</h2><small>Please, provide kit basic info. That includes a name and exposure</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Kit Name</label> <input type="text" ng-model="vm.kitForm.name"></md-input-container><div layout="row" layout-align="space-between start"><div class="form_blockInput_select"><label>Exposure:</label><md-select ng-model="vm.kitForm.exposure" placeholder="Select exposure"><md-option ng-repeat="exposure in vm.exposure" ng-value="{{ exposure.value }}">{{ exposure.name }}</md-option></md-select></div></div></div></div></div></section><section class="form_block form_blockMap"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Kit location</h2><small>You can adjust the location by dragging the marker on the map.</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_button" ng-if="!vm.kitForm.location.lat && !vm.kitForm.location.lng"><div class="form_blockInput_container" layout="row" layout-align="center center"><md-button class="md-flat md-primary" ng-click="vm.getLocation()">Get your location</md-button></div></div><div class="form_blockInput_map" ng-if="vm.kitForm.location.lat && vm.kitForm.location.lng"><leaflet center="vm.kitForm.location" defaults="vm.defaults" markers="vm.markers" tiles="vm.tiles" width="100%" height="100%"></leaflet></div></div></div></section><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Kit tags</h2><small>Kits can be grouped by tags. Choose from the available tags or submit a tag request on the <a href="https://forum.smartcitizen.me/" target="_blank">Forum</a>.</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><div><md-select ng-model="vm.tag" placeholder="Select tag"><md-option ng-value="{{ tag.id }}" ng-repeat="tag in vm.tags">{{ tag.name }}</md-option></md-select></div><div class="form_blockInput_chips"><div class="chips" layout="row" layout-align="start center"><div class="chip kit_tag" ng-repeat="tag in vm.kitForm.tags"><span class="chip_name">{{ tag }}</span> <button class="chip_icon" ng-click="vm.removeTag(tag.id)" arial-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg"></md-icon></button></div></div></div></div></div></div></section><section class="form_block form_blockNormal"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Kit description</h2><small>Say something nice about your kit. Why is it for? Is this part of any kind of project? Whatever :)</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Description</label> <textarea type="text" ng-model="vm.kitForm.description" placeholder="Describe your kit" md-maxlength="120"></textarea></md-input-container></div></div></div></section></form><md-button class="md-primary timeline_button timeline_buttonOpen" ng-click="vm.openKitSetup()">Open kit set up</md-button></section><section ng-show="vm.step === 2"><form><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text long"><h2>Setup your kit</h2><small>In order to have your kit connected to the Smart Citizen platform, we need a few step involving the connexion of your kit to your computer. This tool will help you register your kit to the platform, setup your kit\'s Wi-Fi settings and update its firmware. Currently we support Google Chrome in Win, Mac and Linux. If this is your first time, maybe you will like to follow the <a href="http://docs.smartcitizen.me/#/start/adding-a-smart-citizen-kit" target="_blank">Startup guide</a>.</small></div><img src="assets/images/sckit_avatar_2.jpg" alt="Smartcitizen Kit"></div></div></div></section></form><section class="form_block"><div setuptool=""></div></section><form><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Mac address</h2><small>The setup tool will read the Mac Address automatically from your kit. Plase wait or enter it manually.</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Mac Address</label> <input type="text" pattern="([0-9A-Fa-f]{2}\\:){5}([0-9A-Fa-f]{2})" ng-model="vm.macAddress"></md-input-container></div></div></div></section></form><md-button class="md-primary timeline_button timeline_buttonOpen inverted" ng-click="vm.submitForm()">Save</md-button></section></section></section>'),t.put("app/components/kit/newKit/newKit.html",'<section class="kit_dataChange"><section class="timeline" flex="1" layout="row" layout-align="center center"><div class="timeline_container" layout="row" layout-align="center start"><div layout="column" layout-align="start center"><div class="timeline_stepCircle" layout="row" layout-align="center center" ng-class="{\'is-on\': vm.step === 1, \'is-off\': vm.step !== 1}">1</div><div class="timeline_stepName vertical">Kit data</div></div><div class="timeline_line"></div><div layout="column" layout-align="start center"><div class="timeline_stepCircle" layout="row" layout-align="center center" ng-class="{\'is-on\': vm.step === 2, \'is-off\': vm.step !== 2}">2</div><div class="timeline_stepName vertical">Set up</div></div></div></section><section class="timeline_content" flex="1"><section ng-show="vm.step === 1"><form><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Basic information</h2><small>Please, provide kit basic info. That includes a name and exposure</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Kit Name</label> <input type="text" ng-model="vm.kitForm.name"><div class="form_errors"><div ng-repeat="error in vm.errors.name">Name {{ error }}</div></div></md-input-container><div layout="row" layout-align="space-between start"><div class="form_blockInput_select"><label>Exposure:</label><md-select ng-model="vm.kitForm.exposure" placeholder="Select exposure"><md-option ng-repeat="exposure in vm.exposure" ng-value="{{ exposure.value }}">{{ exposure.name }}</md-option></md-select></div></div></div></div></div></section><section class="form_block form_blockMap"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Kit location</h2><small>Please, let us locate you, later you can adjust the location by dragging the marker on the map.</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_button" ng-if="!vm.kitForm.location.lat && !vm.kitForm.location.lng"><div class="form_blockInput_container" layout="row" layout-align="center center"><md-button class="md-flat md-primary" ng-click="vm.getLocation()">Get your location</md-button></div></div><div class="form_blockInput_map" ng-if="vm.kitForm.location.lat && vm.kitForm.location.lng"><leaflet center="vm.kitForm.location" defaults="vm.defaults" markers="vm.markers" tiles="vm.tiles" width="100%" height="100%"></leaflet></div></div></div></section><section class="form_block form_blockNormal isEven"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Kit tags</h2><small>Kits can be grouped by tags. Choose from the available tags or submit a tag request on the <a href="https://forum.smartcitizen.me/" target="_blank">Forum</a>.</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><div><md-select ng-model="vm.tag" placeholder="Select tag"><md-option ng-value="{{ tag.id }}" ng-repeat="tag in vm.tags">{{ tag.name }}</md-option></md-select></div><div class="form_blockInput_chips"><div class="chips" layout="row" layout-align="start center"><div class="chip kit_tag" ng-repeat="tag in vm.kitForm.tags"><span class="chip_name">{{ tag.name }}</span> <button class="chip_icon" ng-click="vm.removeTag(tag.id)" arial-label=""><md-icon md-svg-src="./assets/images/close_icon_black.svg"></md-icon></button></div></div></div></div></div></div></section><section class="form_block form_blockNormal"><div layout="row" layout-align="start start"><div class="form_blockContent"><div layout="row"><div class="form_blockContent_text"><h2>Kit description</h2><small>Say something nice about your kit. Why is it for? Is this part of any kind of project? Whatever :)</small></div></div></div><div class="form_blockInput" flex=""><div class="form_blockInput_container"><md-input-container><label>Description</label> <textarea type="text" ng-model="vm.kitForm.description" placeholder="Describe your kit" md-maxlength="120"></textarea></md-input-container></div></div></div></section></form><md-button class="md-flat md-primary timeline_button" ng-click="vm.submitStepOne()">Next</md-button></section></section></section>'),t.put("app/components/kit/showKit/showKit.html",'<section class="kit_data" change-content-margin=""><section class="kit_menu" layout="row" layout-align="center center" stick=""><section class="overlay" ng-if="!vm.kit"></section><div class="container" layout="row" layout-align="space-between center"><div><div class="kit_user" layout="row" layout-align="start center"><img ng-src="{{ vm.kit.owner.avatar || \'./assets/images/avatar.svg\'}}"> <a href="./users/{{vm.kit.owner.id}}"><span>{{ vm.kit.owner.username}}</span></a></div><div class="kit_name" layout="row" layout-align="start center"><img ng-src="./assets/images/sensor_icon.svg"> <span>{{ vm.kit.name }}</span></div><div class="kit_battery" layout="row" layout-align="start center"><md-icon md-svg-src="{{ vm.battery.icon }}"></md-icon><span>{{ vm.battery.value }} {{ vm.battery.unit }}</span></div></div><div class="kit_time" layout="row" layout-align="start center"><span>Last data received: {{ vm.kit.timeParsed }}</span></div><div class="kit_navbar" layout="row" layout-align="start center" active-button=""><md-button href="#" class="md-flat chart_icon" aria-label="" analytics-on="click" analytics-category="Kit Detail Section Button" analytics-event="click" analytics-label="Chart"><md-icon md-svg-src="./assets/images/chart_icon.svg"></md-icon></md-button><md-button href="#" class="md-flat kit_details_icon" aria-label="" analytics-on="click" analytics-category="Kit Detail Section Button" analytics-event="click" analytics-label="Kit"><md-icon md-svg-src="./assets/images/kit_details_icon_light.svg"></md-icon></md-button><md-button href="#" class="md-flat user_details" aria-label="" analytics-on="click" analytics-category="Kit Detail Section Button" analytics-event="click" analytics-label="User"><md-icon md-svg-src="./assets/images/user_details_icon.svg"></md-icon></md-button><md-button href="#" class="md-flat discussion_icon" aria-label="" analytics-on="click" analytics-category="Kit Detail Section Button" analytics-event="click" analytics-label="Comments"><md-icon md-svg-src="./assets/images/discussion_icon.svg"></md-icon></md-button></div></div></section><section class="kit_fixed" move-down=""><section class="overlay" ng-if="!vm.kit"><h1>No kit selected <span class="emoji">ðŸ‘†</span></h1><p>Browse the map and tap on any kit to see its data.</p><div class="hint"><p>We can also take you to your nearest online kit by letting us know your location.</p><md-button class="call-to-action" ng-click="vm.geolocate()">Locate me</md-button></div></section><div no-data-backdrop=""></div><section class="kit_overview"><md-button ng-click="vm.slide(\'right\')" class="md-flat button_scroll button_scroll_left" layout="column" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/arrow_left_icon.svg"></md-icon></md-button><div class="sensors_container" layout="row" layout-align="center center" horizontal-scroll=""><div ng-repeat="sensor in vm.sensors" class="sensor_container" ng-click="vm.showSensorOnChart(sensor.id)"><div layout="row"><div><md-icon md-svg-src="{{ sensor.icon }}" class="sensor_icon" flex="20"></md-icon></div><div class="sensor_value" ng-class="{sensor_value_null: sensor.value === \'N/A\'}">{{ sensor.value }}</div><div class="sensor_right"><div class="sensor_unit">{{ sensor.unit }}</div><md-icon md-svg-src="{{ sensor.arrow }}" class="sensor_arrow"></md-icon></div></div><small>{{ sensor.name }}</small></div></div><md-button ng-click="vm.slide(\'left\')" class="md-flat button_scroll button_scroll_right" layout="column" layout-align="center center" aria-label=""><md-icon md-svg-src="./assets/images/arrow_right_icon.svg"></md-icon></md-button></section><section class="kit_detailed"><section class="kit_chart"><div class="container" layout="row"><div class="kit_chart_left"><div class="sensor_select"><md-icon md-svg-src="{{ vm.selectedSensorData.icon }}" class="sensor_icon_selected"></md-icon><md-select placeholder="Choose sensor" ng-model="vm.selectedSensor" analytics-on="click" analytics-category="Kit Chart" analytics-event="click" analytics-label="Metric"><md-option ng-repeat="sensor in vm.sensors" ng-value="{{sensor.id}}" ng-selected="$first"><img class="select_image" ng-src="{{ sensor.icon }}"> <span>{{ sensor.name }}</span></md-option></md-select></div><div class="sensor_data" show-popup-info=""><span class="sensor_value">{{ vm.selectedSensorData.value }}</span> <span class="sensor_unit">{{ vm.selectedSensorData.unit }}</span></div><div class="sensor_data_description" hide-popup-info="">This is the latest value received</div><div class="sensor_description"><h6>{{ vm.selectedSensorData.name }}</h6><div class="sensor_description_content"><small class="sensor_description_preview">{{ vm.selectedSensorData.previewDescription }}<a href="#" ng-show="vm.selectedSensorData.previewDescription.length > 140" show-popup="">More info</a></small><p class="sensor_description_full" hide-popup="">{{ vm.selectedSensorData.fullDescription }}</p></div></div><div class="sensor_compare"><p><span>Compare with</span><md-select placeholder="NONE" ng-model="vm.selectedSensorToCompare"><md-option ng-repeat="sensor in vm.sensorsToCompare" ng-value="{{sensor.id}}" analytics-on="click" analytics-category="Kit Chart" analytics-event="click" analytics-label="Compare"><img class="select_image" ng-src="{{ sensor.icon }}"> <span class="sensor_name">{{ sensor.name }}</span></md-option></md-select></p></div></div><div class="kit_chart_right" flex=""><div class="chart_navigation" layout="row" layout-align="end center"><div class="picker_container" layout="row" layout-align="center center"><md-select class="kit_timeOpts" ng-model="vm.dropDownSelection" placeholder="Last Data Received" ng-change="vm.timeOptSelected()"><md-option ng-value="opt" ng-repeat="opt in vm.timeOpt">{{ opt }}</md-option></md-select></div><div class="picker_container" layout="row" layout-align="center center"><label for="picker_from">From:</label> <input type="text" id="picker_from" class="date_picker" placeholder="FROM"></div><div class="picker_container" layout="row" layout-align="center center"><label for="picker_to">To:</label> <input type="text" id="picker_to" class="date_picker" placeholder="TO"></div><div class="chart_move" layout="row" layout-align="center center"><md-button href="#" ng-click="vm.moveChart(\'left\')" class="chart_move_button chart_move_left" aria-label="" layout="row" layout-align="center center"><md-icon md-svg-src="./assets/images/arrow_left_icon.svg"></md-icon></md-button><md-button href="#" ng-click="vm.moveChart(\'right\')" class="chart_move_button chart_move_right" aria-label="" layout="row" layout-align="center center"><md-icon md-svg-src="./assets/images/arrow_right_icon.svg"></md-icon></md-button></div></div><md-progress-circular ng-show="vm.loadingChart" class="md-hue-3 chart_spinner" md-mode="indeterminate"></md-progress-circular><div chart="" class="chart_container" chart-data="vm.chartDataMain"></div></div></div></section><section class="kit_details" ng-if="vm.kit"><div class="kit_detailed_content_container" layout="row" layout-align="space-between start"><div class="kit_details_content_main" flex=""><div class="kit_details_content"><h1 class="kit_details_name">{{ vm.kit.name }}</h1><p class="kit_details_location"><md-icon class="icon_label" md-svg-src="./assets/images/location_icon_normal.svg"></md-icon><span class="h4">{{ vm.kit.location || \'No location\' }}</span></p><p class="kit_details_type"><md-icon class="icon_label" md-svg-src="./assets/images/kit_details_icon_normal.svg"></md-icon><span class="h4">{{ vm.kit.type }}</span></p><p class="kit_details_labels"><span class="label" ng-repeat="label in vm.kit.labels">{{ label }}</span> <span class="tag" ng-repeat="tag in vm.kit.userTags">{{ tag }}</span></p></div></div><div class="kit_details_manage" ng-if="vm.kitBelongsToUser"><div class="kit_details_manage_buttons"><md-button ng-href="/kits/new?step=2" class="kit_details_button_setup" aria-label="">SET UP</md-button><md-button ng-href="/kits/edit/{{vm.kit.id}}" class="kit_details_button_edit" aria-label="">EDIT</md-button><md-button ng-click="vm.removeUser()" class="warn" aria-label="">DELETE</md-button></div><div class="kit_details_manage_data"><div class="kit_details_macaddress data_container"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/mac_address_icon.svg"></md-icon><span class="bold">Mac Address:</span> <span>{{ vm.kit.macAddress }}</span></div><div class="kit_details_debug data_container"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/debug_icon.svg"></md-icon><span class="bold">Debug mode:</span> <span>Enabled</span></div><div class="kit_details_key" layout="row" layout-align="start center"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/key_icon.svg"></md-icon><span class="bold">API Key:</span><div api-key="vm.legacyApiKey"></div></div><div class="clearfix"></div><md-button class="kit_details_download data_container" ng-click="vm.downloadData(vm.kit)"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/download_icon.svg" ng-click="vm.downloadData(vm.kit)"></md-icon><span class="bold">Download Data</span></md-button></div></div><section class="info kit_details_notAuth" ng-if="!vm.kitBelongsToUser"><h1>People looking for a better city</h1><p>Smart Citizen is a a platform to generate participatory processes of the people in the cities. Connecting data, people and knowledge, the objective of the platform is to serve as a node for building productive open indicators and distributed tools, and thereafter the collective construction of the city for its own inhabitants.</p><md-button>GET YOUR KIT AND JOIN US</md-button></section></div></section><section class="kit_owner" ng-if="vm.kit"><div class="kit_detailed_content_container" layout="row"><div class="kit_detailed_avatar"><img ng-src="{{ vm.kit.owner.avatar || \'./assets/images/avatar.svg\' }}"></div><div class="kit_owner_content"><div class="kit_owner_info"><a href="./users/{{vm.kit.owner.id}}" class="kit_owner_usernameLink"><h2 class="kit_owner_usernameText">{{ vm.kit.owner.username }}</h2></a><p><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/location_icon_normal.svg"></md-icon><span class="h4"><span ng-if="vm.kit.owner.city">{{ vm.kit.owner.city }}</span> <span ng-if="vm.kit.owner.city && vm.kit.owner.country">,</span> <span ng-if="vm.kit.owner.country">{{ vm.kit.owner.country }}</span> <span ng-if="!vm.kit.owner.city && !vm.kit.owner.country">No location</span></span></p><p ng-if="vm.kit.owner.url"><md-icon class="kit_detailed_icon_content" md-svg-src="./assets/images/url_icon_normal.svg"></md-icon><span class="h4" ng-bind-html="vm.kit.owner.url | linky:\'_blank\'">{{ vm.kit.owner.url || \'No URL\'}}</span></p></div><section class="kit_owner_kits inside_list" ng-if="vm.sampleKits.length > 0"><h1>Other kits owned by {{ vm.kit.owner.username }}</h1><kit-list kits="vm.sampleKits"></kit-list><md-button ng-href="/users/{{ vm.kit.owner.id }}" ng-if="vm.ownerKits.length > 5" class="kit_owner_kits_more_button" aria-label="">VIEW ALL KITS OF {{ vm.kit.owner.username }}</md-button></section></div></div><div class="clearfix"></div></section><section class="kit_comments" ng-if="vm.kit"><div class="kit_detailed_content_container"><div class="kit_detailed_content_container" ng-include="\'app/components/disqus/disqus.html\'"></div></div></section></section></section></section>'),t.put("app/core/animation/backdrop/loadingBackdrop.html",'<md-backdrop ng-if="vm.isViewLoading || vm.mapStateLoading" ng-class="{\'md-mainBackdrop\': vm.isViewLoading, \'md-stateChangeBackdrop\': vm.mapStateLoading}"><md-icon ng-if="vm.isViewLoading" md-svg-src="./assets/images/LogotipoSmartCitizen.svg" class="backdrop_icon"></md-icon><md-progress-circular class="md-hue-3 backdrop_spinner" md-mode="indeterminate"></md-progress-circular></md-backdrop>'),t.put("app/core/animation/backdrop/noDataBackdrop.html",'<md-backdrop ng-if="vm.kitWithoutData" class="md-noDataBackdrop"><div class="block info_overlay" layout="column" layout-align="center center"><div ng-if="vm.user === \'visitor\'"><h2 class="title">This kit hasnâ€™t still said a word ðŸ‘¶</h2><p class="message"><a analytics-on="click" analytics-event="click" analytics-category="Offline Kit Comment Link" ng-click="vm.scrollToComments()">Leave a commment</a> below to let its owner know</p></div><div ng-if="vm.user === \'owner\'" class="static_page"><h2 class="title">This kit has still not posted any data ðŸ”§ðŸ”©ðŸ”¨</h2><p class="message">Please, <a href="#disqus_thread">check kit settings</a> or reach the support team.</p></div></div></md-backdrop>')}]);